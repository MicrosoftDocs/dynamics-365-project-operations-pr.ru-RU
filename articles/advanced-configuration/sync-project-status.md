---
title: Синхронизация статуса проекта, чтобы предотвратить ввод в закрытые проекты
description: В этой статье объясняется, как синхронизировать статус проекта, чтобы предотвратить ввод в неактивные или закрытые проекты.
author: ryansandnessMSFT
ms.date: 08/09/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: ryansandnessMSFT
ms.openlocfilehash: 7a306da164235f36d9ed5e69196508dce6d257de
ms.sourcegitcommit: 6b6c2bfd04e3e613ed1f38355c7cd47c3a56748d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/24/2022
ms.locfileid: "9348038"
---
# <a name="sync-project-status-to-prevent-entry-against-closed-projects"></a>Синхронизация статуса проекта, чтобы предотвратить ввод в закрытые проекты

_**Относится к:** Project Operations для сценариев на основе ресурсов/без запасов_

## <a name="scenario"></a>Сценарий

Contoso эксплуатирует Microsoft Dynamics 365 Project Operations для сценариев на основе ресурсов/без запасов. В рамках обычной деловой деятельности проекты могут быть завершены или приостановлены. Вы можете деактивировать проект, чтобы гарантировать отсутствие расходов или счетов-фактур.

## <a name="solution"></a>Решение

### <a name="prerequisites"></a>Предварительные условия

-   Необходимо установить Microsoft Dynamics 365 Finance 10.0.29 или более позднюю версию.
-   Должно быть установлено или настроено вручную сопоставление двойной записи 1.0.0.3 для Projects V2 (msdyn\_projects), как описано ниже.

### <a name="create-an-updated-version-of-the-project-operations-integration-projects-v2-dual-write-map"></a>Создание обновленной версии сопоставления двойной записи интеграции Project Operations V2

Для обновления сопоставления двойной записи Project Operations Projects V2:

1. Перейдите в рабочую область **Управление данными** и выберите **Двойная запись**.
2. Выберите плитку **Двойная запись**.
3. из столбца **Сопоставление таблиц** найдите и выберите **Project V2 (msdyn\_projects)**, затем выберите "Стоп".
4. Выберите имя сопоставления, чтобы открыть сопоставление, затем выберите **[Нет]**.
5. В диалоговом окне «Выбрать столбец» выберите **statecode \[Статус проекта\]**, затем выберите ОК. Вы можете ввести **state** в значении фильтра, чтобы сузить список.
6.  Выберите **Добавить или изменить преобразование** в столбце **тип сопоставления** для редактирования преобразования.
7.  В поле **Тип преобразования** выберите **ValueMap**.
8.  Выберите **Добавить сопоставление значений**, затем добавьте следующее **Ключи** и **Значения**:

   Ключ.       | Стоимость 
   ----------|-------
   InProcess | 0     
   Завершено | 1     

![Снимок экрана, показывающий сопоставление с двойной записью](media/projectstage-dw-mapping.png)

9. Выберите **Сохранить**.
10. С верхней части страницы **Двойная запись > Projects V2 (msdyn_projects)** выберите **Сохранить как**.
11. В области **Добавить таблицу** в поле **Издатель** выберите **Издатель CDS по умолчанию**.
12. Установите в поле **Версия** значение 1.0.0.3.
13. Введите **Описание**, затем выберите **Сохранить**.
14. В верхней части страницы **Двойная запись > Projects V2 (msdyn_projects)** выберите **Выполнить**, чтобы запустить сопоставление, затем выберите **Да**, если поступит запрос подтверждения перед запуском. 

### <a name="close-a-newly-completed-project"></a>Закрытие только что завершенного проекта

Dynamics 365 Finance использует поле **стадия проекта** для различения проектов **в процессе** или **завершенный**. **Законченные** проекты не могут нести расходы или выставлять счета клиентам.

1. Откройте проект для деактивации.
2. На ленте выберите **Деактивировать**.

> [!NOTE]
> Вы можете либо деактивировать, либо закрыть проект, так как они оба будут вести себя одинаково в контексте Finance.

3. В Finance откройте страницу **Список всех проектов**.
4. Убедитесь, что деактивированный проект не отображается в списке.
5. В фильтре **показать проекты** над списком измените значение с **Активный** на **Все**.
6. Теперь вы увидите деактивированный проект.

Если вы попытаетесь зарегистрировать время или расходы по этому проекту в Finance, вы не увидите проект для выбора. Если вы вручную введете номер проекта в расходе, вы увидите сообщение типа «Этап проекта завершен, запись в проект невозможна». Выставление счетов и другие функции выставления счетов должны быть отключены, так как они будут в контексте закрытого проекта.

