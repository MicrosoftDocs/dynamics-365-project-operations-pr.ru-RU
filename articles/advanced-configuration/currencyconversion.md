---
title: Настройка конвертации валюты для расчета цен продажи на основе ставок затрат
description: В этой статье поясняется, как настроить поведение конвертации валюты, которое будет использоваться в Microsoft Dynamics 365 Project Operations при создании проводок продаж из проводок затрат.
author: rumant
ms.date: 11/01/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: rumant
ms.openlocfilehash: 3fa8077deb18f1a54e7f0f5e6dc4491a830df45b
ms.sourcegitcommit: 95e52fcf012a51229f3f6ae7dbf7b0fa56072a85
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2022
ms.locfileid: "9816676"
---
# <a name="set-up-currency-conversion-to-calculate-sales-prices-from-cost-rates"></a>Настройка конвертации валюты для расчета цен продажи на основе ставок затрат

_**Относится к:** Project Operations для сценариев на основе ресурсов/без запасов_

В Microsoft Dynamics 365 Project Operations цены продаж для категорий расходов могут быть установлены в виде числовых значений или настроены таким образом, чтобы они рассчитывались на основе понесенных затрат.

Когда они рассчитываются на основе понесенных затрат, доступны следующие варианты:

- По себестоимости
- Процент наценки сверх себестоимости

В сценариях, когда затраты понесены в валюте, отличной от валюты продаж для контракта по проекту, требуется конвертация валюты для расчета цены продажи на основе затрат.

## <a name="currency-conversion-behavior-that-uses-native-dataverse-exchange-rates"></a>Конвертация валюты с использованием собственных обменных курсов Dataverse

По умолчанию в Project Operations используются обменные курсы, которые хранятся в таблице «Валюта» в Dataverse. Чтобы настроить Project Operations для использования собственных обменных курсов для расчета цен продажи на основе затрат, выполните следующие действия.

1. Выберите **Project Operations \> Параметры\> Параметры**.
1. Откройте страницу подробностей **Параметры проекта** .
1. Установите в поле **Логика конвертации валют** пустое значение.

## <a name="currency-conversion-behavior-that-uses-exchange-rates-from-finance-and-operations-apps"></a>Конвертация валюты с использованием обменных курсов из приложений для управления финансами и операциями

Обменные курсы в таблице "Валюта", доступные в Dataverse, не являются актуальными на определенную дату. Следовательно, они не всегда могут масштабироваться в соответствии с требованиями, предъявляемыми к расчету цен продаж на основе ставок затрат.

Для расчета цен продаж в валюте продаж по ставкам затрат в валюте себестоимости можно использовать обменные курсы из приложений для управления финансами и операциями. Чтобы настроить это поведение конвертации валюты, выполните следующие действия.

1. На странице **Параметры проекта** добавьте поле **Логика конвертации валют**. Затем сохраните и опубликуйте настройку.
1. Выберите **Project Operations \> Параметры\> Параметры**.
1. Откройте страницу подробностей **Параметры проекта** . 
1. Установите в поле **Поведение конвертации валюты** значение **Расширено с возможностью возврата к параметрам по умолчанию**.
1. Предоставьте роли безопасности **Пользователь приложения с двойной записью** разрешение **Глобальное чтение** в отношении следующих таблиц:

    - msdyn\_currencyexchangerates
    - msdyn\_currencyexchangeratepairs
    - msdyn\_exchangeratetypes

1. В среде приложений для управления финансами и операциями запустите следующие сопоставления двойной записи с начальной синхронизацией:

    - Тип валютного курса (msdyn\_exchangeratetypes)
    - Пара валют валютного курса (msdyn\_currencyexchangeratepairs)
    - Валютные курсы CDS (msdyn\_currencyexchangerates)

После внесения этих изменений двойная запись сделает обменные курсы из среды приложений для управления финансами и операциями доступными в Dataverse. После этого Project Operations будет использовать эти обменные курсы для конвертации ставок затрат в валюту продаж по контракту.

> [!NOTE]
> Такое поведение конвертации валюты применяется только к расчету цен продаж на основе ставок затрат. Оно не будет использоваться для расчета значений в базовой валюте в общем случае. Для значений в базовой валюте всегда будут использоваться собственные обменные курсы Dataverse, независимо от того, выполнили ли вы эту процедуру.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
