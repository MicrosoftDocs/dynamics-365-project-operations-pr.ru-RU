---
title: Настройка автоматического создания счетов
description: Эта тема предоставляет информацию о том, как настроить систему для автоматического создания счетов.
author: rumant
ms.date: 10/13/2020
ms.topic: article
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 894e8f6e4ffbb5f003cdd1f69594e2a1e043b514923de5673d7ba9afaa6894e8
ms.sourcegitcommit: 7f8d1e7a16af769adb43d1877c28fdce53975db8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2021
ms.locfileid: "6992672"
---
# <a name="configure-automatic-invoice-creation"></a>Настройка автоматического создания счетов

_**Относится к:** Project Operations для сценариев на основе ресурсов/без запасов_


Выполните следующие шаги, чтобы настроить автоматический запуск счетов в Dynamics 365 Project Operations.

1. Перейдите в раздел **Параметры** > **Пакетные задания**.
2. Создайте пакетное задание и назовите его **Создание счетов в Project Operations**. Имя пакетного задания должно включать слова "создание счетов".
3. В поле **Тип задания** выберите **Нет**. По умолчанию для параметров **Частота ежедневно** и **Активно** задано значение **Да**.
4. Выберите **Запустить рабочий процесс**. В диалоговом окне **Поиск в записях** отображаются три рабочих процесса:

    - ProcessRunCaller
    - ProcessRunner
    - UpdateRoleUtilization

5. Выберите **ProcessRunCaller**, затем выберите **Добавить**.
6. В следующем диалоговом окне выберите **ОК**. За рабочим процессом **Сон** следует рабочий процесс **Обработка**.

  > [!NOTE]
  > Можно также выбрать **ProcessRunner** на шаге 5. Затем при выборе **OK** за рабочим процессом **Обработка** следует рабочий процесс **Сон**.

Рабочие процессы **ProcessRunCaller** и **ProcessRunner** создают счета. **ProcessRunCaller** вызывает **ProcessRunner**. Счета фактически создаются рабочим процессом **ProcessRunner**. Он перебирает все строки контракта, для которых должны быть созданы счета, и создает счета для этих строк. Чтобы определить строки контракта, для которых должны быть созданы счета, задание проверяет даты запуска счетов для строк контракта. Если строки контракта, принадлежащие к одному контракту, имеют одинаковую дату запуска счета, транзакции объединяются в один счет с двумя строками счета. Если транзакции, для которых требуется создать счета, отсутствуют, задание пропускает создание счета.

После завершения работы **ProcessRunner** он вызывает **ProcessRunCaller**, предоставляет время завершения и закрывается. **ProcessRunCaller** затем запускает таймер, который работает 24 часа с указанного времени завершения. По завершении работы таймера процесс **ProcessRunCaller** закрывается.

Задание пакетной обработки для создания счетов — это повторяющееся задание. Если это процесс пакетной обработки запускается много раз, создается несколько экземпляров задания, что вызывает ошибки. Следовательно, необходимо запустить пакетный процесс только один раз, и заново запускать его следует только в том случае, если он перестал работать.

> [!NOTE]
> Пакетное выставление счетов запускается только для строк контракта по проекту, которые настроены с помощью графиков счетов. В строке контракта с методом выставления счетов с фиксированной ценой должны быть настроены вехи. Для строки контракта по проекту с методом выставления счетов с учетом времени и материала потребуется настроить расписание счетов на основе даты. То же самое справедливо для строки контракта на основе проекта.     


[!INCLUDE[footer-include](../includes/footer-banner.md)]