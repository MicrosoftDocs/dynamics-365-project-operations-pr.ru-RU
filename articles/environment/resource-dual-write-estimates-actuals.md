---
title: Интеграция оценок и фактических данных по проекту
description: Этот тема предоставляет информацию об интеграции с двойной записью Project Operations для оценок и фактических данных по проекту.
author: sigitac
ms.date: 4/26/2021
ms.topic: article
ms.prod: ''
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: d8aa1541a3560db175acead1d000895312b299db
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2021
ms.locfileid: "6000047"
---
# <a name="project-estimates-and-actuals-integration"></a><span data-ttu-id="be6ab-103">Интеграция оценок и фактических данных по проекту</span><span class="sxs-lookup"><span data-stu-id="be6ab-103">Project estimates and actuals integration</span></span>

<span data-ttu-id="be6ab-104">_**Относится к:** Project Operations для сценариев на основе ресурсов/без запасов_</span><span class="sxs-lookup"><span data-stu-id="be6ab-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="be6ab-105">Этот тема предоставляет информацию об интеграции с двойной записью Project Operations для оценок и фактических данных по проекту.</span><span class="sxs-lookup"><span data-stu-id="be6ab-105">This topic provides information about Project Operations dual-write integration for project estimates and actuals.</span></span>

## <a name="project-estimates"></a><span data-ttu-id="be6ab-106">Оценки проекта</span><span class="sxs-lookup"><span data-stu-id="be6ab-106">Project estimates</span></span>

<span data-ttu-id="be6ab-107">Оценка трудозатрат, затрат и материалов по проекту создается и ведется в Microsoft Dataverse и синхронизирован с приложения Finance and Operations для учета.</span><span class="sxs-lookup"><span data-stu-id="be6ab-107">Project labor, expense, and material estimates are created and maintained in Microsoft Dataverse and synchronized to Finance and Operations apps for accounting purposes.</span></span> <span data-ttu-id="be6ab-108">Операции создания, обновления и удаления не поддерживаются через приложения Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="be6ab-108">Create, update, and delete operations aren't supported through the Finance and Operations apps.</span></span>

<span data-ttu-id="be6ab-109">Для создания оценок требуется действующая конфигурация учета для проекта.</span><span class="sxs-lookup"><span data-stu-id="be6ab-109">Creating estimates requires a valid accounting configuration for the project.</span></span> <span data-ttu-id="be6ab-110">Проекты, связанные со строками контракта, должны иметь допустимый профиль затрат и доходов, определенный в правилах профиля затрат и доходов по проекту.</span><span class="sxs-lookup"><span data-stu-id="be6ab-110">Projects that are associated with contract lines must have a valid project cost and revenue profile defined in the Project cost and revenue profile rules.</span></span> <span data-ttu-id="be6ab-111">Для получения дополнительной информации см. [Настроить учет тарифицируемых проектов](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules).</span><span class="sxs-lookup"><span data-stu-id="be6ab-111">For more information, see [Configure accounting for billable projects](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules).</span></span>

## <a name="labor-estimates"></a><span data-ttu-id="be6ab-112">Оценка трудозатрат</span><span class="sxs-lookup"><span data-stu-id="be6ab-112">Labor estimates</span></span>

<span data-ttu-id="be6ab-113">Оценки трудозатрат создаются руководителем проекта или диспетчером ресурсов, который также назначает общий или именованный ресурс задаче проекта.</span><span class="sxs-lookup"><span data-stu-id="be6ab-113">Labor estimates are created by the Project Manager or Resource manager who also assigns a generic or named resource to the project task.</span></span> <span data-ttu-id="be6ab-114">Записи о назначении ресурсов можно просмотреть на вкладка **Назначения ресурсов** на страница **Сведения о проекте** в Dataverse.</span><span class="sxs-lookup"><span data-stu-id="be6ab-114">Resource assignment records can be reviewed on the **Resource Assignments** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="be6ab-115">Записи о назначении ресурсов в Dataverse создавать записи прогнозов часов в приложения Finance and Operations, использующие **Сущность интеграции Project Operations для оценки часов (msdyn\_resourceassignments)**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-115">Resource assignment records in Dataverse create hour forecast records in Finance and Operations apps using **Project Operations integration entity for hour estimates (msdyn\_resourceassignments)**.</span></span>

   ![Интеграция оценок трудозатрат](./Media/DW4LaborEstimates.png)

<span data-ttu-id="be6ab-117">Двойная запись синхронизирует записи о назначении ресурсов с таблицей промежуточного хранения (**ProjCDSEstimateHoursImport**), а затем использует бизнес-логику для создания и обновления записей прогноза часов (**ProjForecastEmpl**).</span><span class="sxs-lookup"><span data-stu-id="be6ab-117">Dual-write synchronizes resource assignment records to the staging table (**ProjCDSEstimateHoursImport**), and then uses business logic to create and update hour forecast records (**ProjForecastEmpl**).</span></span>

<span data-ttu-id="be6ab-118">Бухгалтер проекта просматривает записи о часах прогноза, созданные в приложения Finance and Operations, перейдя в **Управление и учет для проектов** > **Все проекты** > **План** > **Часовые прогнозы**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-118">The Project accountant reviews forecast hour records created in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Hour forecasts**.</span></span>

## <a name="expense-estimates"></a><span data-ttu-id="be6ab-119">Оценки расходов</span><span class="sxs-lookup"><span data-stu-id="be6ab-119">Expense estimates</span></span>

<span data-ttu-id="be6ab-120">Оценки расходов создаются руководителем проекта на вкладка **Оценка расходов** на страница **Сведения о проекте** в Dataverse.</span><span class="sxs-lookup"><span data-stu-id="be6ab-120">Expense estimates are created by the Project manager on the **Expense Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="be6ab-121">Записи оценки расходов хранятся в сущности **Строка оценки** в Dataverse.</span><span class="sxs-lookup"><span data-stu-id="be6ab-121">Expense estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="be6ab-122">Эти записи оценки имеют класс транзакции, **Расход** и синхронизируются с записями прогноза расходов в приложения Finance and Operations, использующие **Сущность интеграции Project Operations для оценки расходов (msdyn\_estimatelines)**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-122">These estimate records have transaction class, **Expense** and are synchronized to expense forecast records in Finance and Operations apps using **Project Operations integration entity for expense estimates (msdyn\_estimatelines)**.</span></span>

   ![Интеграция оценок расходов](./Media/DW4ExpenseEstimates.png)

<span data-ttu-id="be6ab-124">Двойная запись синхронизирует записи оценки расходов с таблицей промежуточного хранения, **ProjCDSEstimateExpenseImport**, а затем использует бизнес-логику для создания и обновления записей прогноза расходов (**ProjForecastCost**).</span><span class="sxs-lookup"><span data-stu-id="be6ab-124">Dual-write synchronizes expense estimate records to the staging table, **ProjCDSEstimateExpenseImport)** and then uses business logic to create and update expense forecast records (**ProjForecastCost**).</span></span> <span data-ttu-id="be6ab-125">В строках сметы записи сметы продаж и сметы затрат хранятся отдельно.</span><span class="sxs-lookup"><span data-stu-id="be6ab-125">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="be6ab-126">Бизнес-логика в приложениях Finance and Operations заполняет одну запись прогноза расходов, используя эту информацию в таблице промежуточного хранения.</span><span class="sxs-lookup"><span data-stu-id="be6ab-126">The business logic in Finance and Operations apps populates a single Expense forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="be6ab-127">Бухгалтер проекта просматривает записи прогноза расходов в приложения Finance and Operations, перейдя в **Управление и учет для проектов** > **Все проекты** > **План** > **Прогнозы расходов**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-127">The Project accountant can review expense forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Expense forecasts**.</span></span>

## <a name="material-estimates"></a><span data-ttu-id="be6ab-128">Оценки материалов</span><span class="sxs-lookup"><span data-stu-id="be6ab-128">Material estimates</span></span>

<span data-ttu-id="be6ab-129">Оценки материалов создаются руководителем проекта на вкладка **Оценка материалов** на страница **Сведения о проекте** в Dataverse.</span><span class="sxs-lookup"><span data-stu-id="be6ab-129">Material estimates are created by the Project manager on the **Material Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="be6ab-130">Записи оценки материалов хранятся в сущности **Строка оценки** в Dataverse.</span><span class="sxs-lookup"><span data-stu-id="be6ab-130">Material estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="be6ab-131">Эти записи оценки имеют класс транзакции, **Материал** и синхронизируются с записями прогноза номенклатуры в приложениях Finance and Operations, использующие **Таблица интеграции по проекту для оценки материалов (msdyn\_estimatelines)**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-131">These estimate records have the transaction class, **Material** and are synchronized to item forecast records in Finance and Operations apps using **Project integration table for material estimates (msdyn\_estimatelines)**.</span></span>

   ![Интеграция оценок материалов](./Media/DW4MaterialEstimates.png)

<span data-ttu-id="be6ab-133">Двойная запись синхронизирует записи оценки материалов с таблицей промежуточного хранения, **ProjForecastSalesImpor**, а затем использует бизнес-логику для создания и обновления записей прогноза номенклатуры (**ForecastSales**).</span><span class="sxs-lookup"><span data-stu-id="be6ab-133">Dual-write synchronizes material estimate records to the staging table **ProjForecastSalesImpor**, and then uses business logic to create and update item forecast records (**ForecastSales**).</span></span> <span data-ttu-id="be6ab-134">В строках сметы записи сметы продаж и сметы затрат хранятся отдельно.</span><span class="sxs-lookup"><span data-stu-id="be6ab-134">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="be6ab-135">Бизнес-логика в приложениях Finance and Operations заполняет одну запись прогноза номенклатуры, используя эту информацию в таблице промежуточного хранения.</span><span class="sxs-lookup"><span data-stu-id="be6ab-135">The business logic in Finance and Operations apps populates a single Item forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="be6ab-136">Бухгалтер проекта просматривает записи прогноза номенклатуры в приложения Finance and Operations, перейдя в **Управление и учет для проектов** > **Все проекты** > **План** > **Прогнозы номенклатуры**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-136">The Project accountant can review item forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Item forecasts**.</span></span>

## <a name="project-actuals"></a><span data-ttu-id="be6ab-137">Фактические данные проекта</span><span class="sxs-lookup"><span data-stu-id="be6ab-137">Project actuals</span></span>

<span data-ttu-id="be6ab-138">Фактические данные проекта создаются в Dataverse в зависимости от времени, расходов, материалов и выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="be6ab-138">Project actuals are created in Dataverse, based on time, expense, material, and billing activity.</span></span> <span data-ttu-id="be6ab-139">Все операционные атрибуты этих транзакций, включая количество, себестоимость, продажную цену и проект, отражаются в этой сущности Dataverse.</span><span class="sxs-lookup"><span data-stu-id="be6ab-139">All operational attributes of these transactions including quantity, cost price, sales price, and project are captured in this Dataverse entity.</span></span> <span data-ttu-id="be6ab-140">Дополнительные сведения см. [Фактические значения](../actuals/actuals-overview.md).</span><span class="sxs-lookup"><span data-stu-id="be6ab-140">For more information, see [Actuals](../actuals/actuals-overview.md).</span></span> <span data-ttu-id="be6ab-141">Записи фактических данных синхронизируются с приложениями Finance and Operations, использующие сопоставления таблиц с двойной записью **Фактические данные интеграции Project Operations (msdyn\_actuals**) для последующего учета.</span><span class="sxs-lookup"><span data-stu-id="be6ab-141">Actual records are synchronized to Finance and Operations apps using the dual-write table map **Project Operations integration actuals (msdyn\_actuals)** for downstream accounting.</span></span>

   ![Интеграция фактических данных](./Media/DW4Actuals.png)

<span data-ttu-id="be6ab-143">В **Фактические данные интеграции Project Operations** сопоставление таблиц синхронизирует все записи из сущности **Фактические данные** в Dataverse, с атрибутом **Пропустить синхронизацию (только для внутреннего использования)** установлен в **Ложь**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-143">The **Project Operations integration actuals** table map synchronizes all the records from the **Actuals** entity in Dataverse, with the attribute **Skip Sync (internal use only)** set to **False**.</span></span> <span data-ttu-id="be6ab-144">Значение этого атрибута устанавливается в Dataverse автоматически при создании записи.</span><span class="sxs-lookup"><span data-stu-id="be6ab-144">This attribute value is set in Dataverse automatically when the record is created.</span></span> <span data-ttu-id="be6ab-145">Примеры, в которых для этого атрибута установлено значение **Истина**:</span><span class="sxs-lookup"><span data-stu-id="be6ab-145">Examples where this attribute is set to **True** are:</span></span>

  - <span data-ttu-id="be6ab-146">Фактические данные стоимости проекта для внутрихолдинговых транзакций.</span><span class="sxs-lookup"><span data-stu-id="be6ab-146">Project cost actuals for intercompany transactions.</span></span> <span data-ttu-id="be6ab-147">Для получения дополнительной информации см. [Создавать внутрихолдинговые транзакции](../project-accounting/create-intercompany-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="be6ab-147">For more information, see [Create intercompany transactions](../project-accounting/create-intercompany-transactions.md).</span></span> <span data-ttu-id="be6ab-148">Эти записи пропускаются, поскольку система воссоздает фактические данные стоимости проекта в приложения Finance and Operations при разноске внутрихолдинговой накладной поставщика.</span><span class="sxs-lookup"><span data-stu-id="be6ab-148">These records are skipped because the system recreates the project cost actual in Finance and Operations apps when the intercompany vendor invoice is posted.</span></span>
  - <span data-ttu-id="be6ab-149">Отрицательные записи продаж без выставления счета создаются при подтверждении счета-проформы.</span><span class="sxs-lookup"><span data-stu-id="be6ab-149">Negative unbilled sales records created when the proforma invoice is confirmed.</span></span> <span data-ttu-id="be6ab-150">Эти записи пропускаются, потому что субкнига проекта в приложениях Finance and Operations не отменяет запись о продажах без выставления счета при выставлении счета, но меняет статус на полностью выставлен счет.</span><span class="sxs-lookup"><span data-stu-id="be6ab-150">These records are skipped because the project subledger in Finance and Operations apps doesn't reverse the unbilled sales record at invoicing but changes the status to fully invoiced.</span></span>

<span data-ttu-id="be6ab-151">Сопоставление таблиц с двойной записью синхронизирует фактические записи с таблицей промежуточного хранения, **ProjCDSActualsImport**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-151">The dual-write table map synchronizes the actuals records to the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="be6ab-152">Эти записи обрабатываются периодическим процессом **Импорт из таблицы промежуточного хранения** при создании строк журнала интеграции Project Operations и строк предложения по счетам по проекту.</span><span class="sxs-lookup"><span data-stu-id="be6ab-152">These records are processed by the periodic process **Import from staging table** when creating Project Operations integration journal lines and project invoice proposal lines.</span></span> <span data-ttu-id="be6ab-153">Для получения дополнительной информации см. [Журнал интеграции в Project Operations](../project-accounting/project-operations-integration-journal.md).</span><span class="sxs-lookup"><span data-stu-id="be6ab-153">For more information, see [Integration journal in Project Operations](../project-accounting/project-operations-integration-journal.md).</span></span>

<span data-ttu-id="be6ab-154">Dataverse также фиксирует связи между фактическими транзакциями проекта в сущности **Подключение транзакции**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-154">Dataverse also captures the links between the project actual transactions in the **Transaction connection** entity.</span></span> <span data-ttu-id="be6ab-155">Для получения дополнительной информации см. [Связь фактических данных с исходными записями](../actuals/linkingactuals.md).</span><span class="sxs-lookup"><span data-stu-id="be6ab-155">For more information, see [Link actuals to original records](../actuals/linkingactuals.md).</span></span> <span data-ttu-id="be6ab-156">Связи между фактическими транзакциями также синхронизируются с приложениями Finance and Operations, использующие сопоставление таблиц с двойной записью, **Сущность интеграции для отношений транзакции проекта (msdyn\_transactionconnections)**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-156">Links between actual transactions are also synchronized to Finance and Operations apps using the dual-write table map, **Integration entity for project transaction relationships (msdyn\_transactionconnections)**.</span></span> <span data-ttu-id="be6ab-157">Эти записи используются периодическим процессом **Импорт из таблицы промежуточного хранения** при создании строк журнала интеграции Project Operations и строк предложения по счетам по проекту.</span><span class="sxs-lookup"><span data-stu-id="be6ab-157">These records are used by the periodic process, **Import from staging table** when creating Project Operations integration journal lines and Project invoice proposal lines.</span></span>

<span data-ttu-id="be6ab-158">Разноска журнала интеграции Project Operations и предложения по счету по проекту запускает обновление соответствующих записей в таблице промежуточного хранения, **ProjCDSActualsImport**.</span><span class="sxs-lookup"><span data-stu-id="be6ab-158">Posting a Project Operations integration journal and a project invoice proposal triggers an update in respective records in the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="be6ab-159">Система фиксирует и записывает следующие атрибуты учета для фактических транзакций:</span><span class="sxs-lookup"><span data-stu-id="be6ab-159">The system captures and records the following accounting attributes for actuals transactions:</span></span>

- <span data-ttu-id="be6ab-160">Сумма валюты учета</span><span class="sxs-lookup"><span data-stu-id="be6ab-160">Accounting currency amount</span></span>
- <span data-ttu-id="be6ab-161">Валютный курс</span><span class="sxs-lookup"><span data-stu-id="be6ab-161">Exchange rate</span></span>
- <span data-ttu-id="be6ab-162">Код ваучера</span><span class="sxs-lookup"><span data-stu-id="be6ab-162">Voucher number</span></span>
- <span data-ttu-id="be6ab-163">Сумма налога</span><span class="sxs-lookup"><span data-stu-id="be6ab-163">Sales tax amount</span></span>

<span data-ttu-id="be6ab-164">Сопоставление таблиц **Фактические данные интеграции Project Operations** обновляет соответствующие записи фактических данных в Dataverse этой информацией.</span><span class="sxs-lookup"><span data-stu-id="be6ab-164">The **Project Operations integration actuals** table map updates respective actuals records in Dataverse with this information.</span></span>
