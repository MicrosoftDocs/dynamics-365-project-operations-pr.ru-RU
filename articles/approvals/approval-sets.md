---
title: Наборы утверждения
description: В этой статье объясняется, как работать с наборами утверждений, запросами и подмножествами этих операций.
author: stsporen
ms.date: 02/01/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: stsporen
ms.openlocfilehash: 5e030c1aa4a41b428a0f4541fd204a7a3deaba08
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8918098"
---
# <a name="approval-sets"></a>Наборы утверждения

_**Относится к:** Project Operations для сценариев на основе ресурсов/нескладируемых запасов, упрощенное развертывание — от сделки до выставления счетов-фактур_

Наборы утверждений объединяют запросы на утверждение в более мелкие подмножества операций. Это группирование позволяет обрабатывать утверждения по проектам в определенном порядке и позволяет повторять попытки и упорядочивание. Группирование запросов на утверждение вместе повышает надежность и отслеживаемость обработки утверждений для больших объемов утверждений.

Наборы утверждений указывают на общее состояние обработки связанных записей. Когда запись утверждения обрабатывается с использованием набора утверждений, запись перемещается из **Отправлено** в **Утверждено** и больше не связана с набором утверждений. Если запись не выполняется при ее отправке на утверждение, она остается в состоянии **Отправлено** и набор утверждений помечается как неудавшийся. Набор утверждений регистрирует сообщение об ошибке.

## <a name="processing-approvals-and-approval-sets"></a>Обработка утверждений и наборов утверждений
Утверждения, поставленные в очередь на обработку, отображаются в предоставлении **Утверждения в обработке**. Система обрабатывает все записи несколько раз в асинхронном режиме, включая повторную попытку утверждения, если предыдущие попытки оказались неудачными.

Поле **Срок действия набора утверждений** записывает количество оставшихся попыток обработки набора, прежде чем он будет помечен как неудачный.

Наборы утверждений обрабатываются посредством периодической активации на базе **облачного потока**, который называется **Project Service — периодически планировать наборы утверждения проекта**. Он находится в **решении**, которое называется **Project Operations**. 

Убедитесь, что поток активирован, выполнив следующие действия.

1. В качестве администратора войдите в систему на сайте [flow.microsoft.com](https://powerautomate.microsoft.com).
2. В правом верхнем углу переключитесь на среду, которую вы используете для Dynamics 365 Project Operations.
3. Выберите **Решения**, чтобы получить список решений, установленных в среде.
4. В списке решений выберите **Project Operations**.
5. Измените фильтр с **Все** на **Облачные потоки**.
6. Убедитесь, что поток **Project Service — периодически планировать наборы утверждения проекта** находится в состоянии **Вкл**. Если это не так, выберите поток, а затем выберите **Включить**.
7. Убедитесь, что обработка происходит каждые пять минут, просмотрев список **Системные задания** список в разделе **Параметры** вашей среды Dataverse для Project Operations.

## <a name="failed-approvals-and-approval-sets"></a>Сбой утверждений и наборов утверждений
В представлении **Неудачные утверждения** перечислены все утверждения, требующие вмешательства пользователя. Откройте связанные журналы наборов утверждений, чтобы определить причину сбоя.
Если выбрать **Повторить**, будет добавлено значение к счетчику сроку действия набора утверждений, набор утверждений будет возвращен в состояние **Обработка**, и система попытается обработать оставшиеся записи.

## <a name="configure-approval-sets"></a>Настройка наборов утверждений

### <a name="enable-the-approval-sets-feature"></a>Включите функцию наборов утверждений
Прежде чем включить функцию наборов утверждений, убедитесь, что в настоящее время нет обрабатываемых утверждений.

- Перейдите на страницу **Параметры проекта** и выберите **Управление функциями** > **Включить современные утверждения**.

### <a name="turn-off-the-approval-sets-feature"></a>Выключите функцию наборов утверждений
Прежде чем выключить функцию наборов утверждений, убедитесь, что в настоящее время нет обрабатываемых утверждений.

- Перейдите на страницу **Параметры проекта** и выберите **Управление функциями** > **Отключить современные утверждения**.

### <a name="configuring-the-asynchronous-threshold"></a>Настройка асинхронного порога 
При создании наборов утверждения обработка переходит в фоновый режим, когда выбранное количество записей для утверждения превышает указанный порог. Используйте поле **Асинхронный порог** для настройки, когда обработка утверждений должна выполняться синхронно или асинхронно. Выберите одно из следующих значений:

  - Ноль: все запросы должны обрабатываться асинхронно. 
  - Числа больше нуля: утверждения обрабатываются асинхронно только тогда, когда количество отправленных утверждений превышает это значение.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
