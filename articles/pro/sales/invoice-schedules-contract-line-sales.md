---
title: Создание графиков счетов по строке контракта на основе проекта
description: Эта тема предоставляет информацию о создании графиков выставления счетов и контрольных точек для строк контракта.
author: rumant
manager: Annbe
ms.date: 10/17/2020
ms.topic: article
ms.service: dynamics-365-customerservice
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 2183b915dd2f67e03964246cb0689003e48363f7
ms.sourcegitcommit: 3a0c18823a7ad23df5aa3de272779313abe56c82
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "4083422"
---
# <a name="creating-invoice-schedules-on-a-project-based-contract-line"></a><span data-ttu-id="9ca5a-103">Создание графиков счетов по строке контракта на основе проекта</span><span class="sxs-lookup"><span data-stu-id="9ca5a-103">Creating invoice schedules on a project-based contract line</span></span>

<span data-ttu-id="9ca5a-104">_**Относится к:** развертывание Lite — от сделки до счетов-проформ_</span><span class="sxs-lookup"><span data-stu-id="9ca5a-104">_**Applies To:** Lite deployment - deal to proforma invoicing_</span></span>


<span data-ttu-id="9ca5a-105">Вы можете планировать выставление счетов по строке контракта на основе проекта.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-105">You can an invoice schedule to a  project-based contract line.</span></span> <span data-ttu-id="9ca5a-106">Выставление счетов разрешается только после реализации контракта и создания контракта по проекту.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-106">Invoicing is only allowed after the contract is won to and you are creating a project contract.</span></span> <span data-ttu-id="9ca5a-107">График счетов позволяет автоматически создавать черновики счетов для строки контракта на основе проекта.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-107">An invoice schedule allows draft invoices for a project-based contract line to be automatically created.</span></span> <span data-ttu-id="9ca5a-108">Однако, если вы создаете счета только вручную, вы можете пропустить создание графиков счетов в строках контракта.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-108">If however, you only manually create invoices, you can skip creating invoice schedules on contract lines.</span></span>

## <a name="create-a-time-and-material-invoice-schedule-for-a-contract-line"></a><span data-ttu-id="9ca5a-109">Создание графика счетов по времени и материалам для строки контракта</span><span class="sxs-lookup"><span data-stu-id="9ca5a-109">Create a time and material invoice schedule for a contract line</span></span>

<span data-ttu-id="9ca5a-110">Когда строка контракта на основе проекта содержит метод выставления счетов по времени и материалам, вы можете создать график выставления счетов на основе дат.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-110">When a project-based contract line has a time and material billing method, you can create a date-based invoice schedule.</span></span> <span data-ttu-id="9ca5a-111">Чтобы автоматически создать график выставления счетов на основе даты, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-111">To automatically generate a date-based invoice schedule, complete the following steps.</span></span>

1. <span data-ttu-id="9ca5a-112">Перейдите в раздел **Параметры** > **Периодичность выставления счетов** и настройте периодичность выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-112">Go to **Settings** > **Invoice frequencies** and set up an invoice frequence.</span></span>
2. <span data-ttu-id="9ca5a-113">Перейдите к записи контракта по проекту и на вкладке **Сводка** в поле **Запрошенная дата поставки** выберите дату.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-113">Go to the project contract record, and on the **Summary** tab, in the **Requested Delivery Date** field, select a date.</span></span>
3. <span data-ttu-id="9ca5a-114">Откройте строку контракта **Время и материалы** , для которой вы создаете график выставления счетов на основе даты.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-114">Open the **Time and Material** contract line that you are making the date-based invoice schedule for.</span></span> 
4. <span data-ttu-id="9ca5a-115">На вкладке **График выставления счетов** выберите дату начала выставления счетов и частоту выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-115">On the **Invoice Schedule** tab, select the billing start date and the invoice frequency.</span></span>
5. <span data-ttu-id="9ca5a-116">Во вложенной сетке выберите **Сформировать расписание счетов**.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-116">On the subgrid, select **Generate Invoice Schedule**.</span></span> <span data-ttu-id="9ca5a-117">График выставления счетов формируется с полями **Дата прогона счета** , **Дата отсечки транзакций** и **Статус выполнения** , которые устанавливаются следующим образом:</span><span class="sxs-lookup"><span data-stu-id="9ca5a-117">The invoice schedule is generated with the **Invoice Run Date** , **Transaction Cutoff Date** and **Run Status** fields set as follows:</span></span>

    - <span data-ttu-id="9ca5a-118">**Дата прогона счета** : эта дата определяется частотой выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-118">**Invoice Run Date** : This date is dictated by the invoice frequency.</span></span>
    - <span data-ttu-id="9ca5a-119">**Дата отсечки транзакций** : за день до даты прогона счета.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-119">**Transaction Cutoff Date** : The day before the invoice run date.</span></span>
    - <span data-ttu-id="9ca5a-120">**Статус выполнения** : автоматически устанавливается на **Не выполнено**.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-120">**Run Status** : Automatically set to **Not Run**.</span></span> <span data-ttu-id="9ca5a-121">Когда задание автоматического создания счета запускается в определенную дату запуска счета, это поле обновляется на **Выполнено успешно** или **Ошибка выполнения**.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-121">When the automatic invoice creation job runs for a certain invoice run date, this field is updated to **Run Successful** or **Run Failed**.</span></span>


## <a name="create-a-fixed-price-invoice-schedule-for-a-contract-line"></a><span data-ttu-id="9ca5a-122">Создание графика счетов с фиксированной ценой для строки контракта</span><span class="sxs-lookup"><span data-stu-id="9ca5a-122">Create a fixed price invoice schedule for a contract line</span></span>

<span data-ttu-id="9ca5a-123">Когда в строке контракта есть способ выставления счетов с фиксированной ценой, вы можете создать график выставления счетов на основе вех.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-123">When the contract line has a fixed billing method, you can create a milestone-based invoice schedule.</span></span> <span data-ttu-id="9ca5a-124">Выполните следующие шаги, чтобы создать график выставления счетов на основе вех для фиксированного набора вех, которые равномерно распределяются по календарному периоду.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-124">Complete the following steps to generate a milestone-based invoice schedule for a fixed set of equally distributed milestones for the calendar period.</span></span>

1. <span data-ttu-id="9ca5a-125">Перейдите в раздел **Параметры** > **Периодичность выставления счетов** и настройте периодичность выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-125">Go to **Settings** > **Invoice frequencies** and set up an invoice frequence.</span></span>
2. <span data-ttu-id="9ca5a-126">Перейдите к записи контракта по проекту и на вкладке **Сводка** в поле **Запрошенная дата поставки** выберите дату.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-126">Go to the project contract record, and on the **Summary** tab, in the **Requested Delivery Date** field, select a date.</span></span>
3. <span data-ttu-id="9ca5a-127">Откройте строку контракта **Фиксированная цена** , для которой вы создаете график вех.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-127">Open the **Fixed Price** contract line that you are creating the milestone schedule for.</span></span> <span data-ttu-id="9ca5a-128">На вкладке **Вехи выставления счетов** выберите дату начала выставления счетов и частоту выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-128">On the **Billing Milestones** tab, select the billing start date and the invoice frequency.</span></span> 
4. <span data-ttu-id="9ca5a-129">Во вложенной сетке выберите **Сформировать периодические вехи**.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-129">On the subgrid, select **Generate Periodic Milestones**.</span></span> <span data-ttu-id="9ca5a-130">График выставления счетов создается с полями **Название вехи** , **Дата вехи** и **Сумма вехи** , установленными следующим образом:</span><span class="sxs-lookup"><span data-stu-id="9ca5a-130">The  invoice schedule is generated with the **Milestone Name** , **Milestone Date** , and **Milestone Amount** fields set as follows:</span></span>

    - <span data-ttu-id="9ca5a-131">**Название вехи** : эта дата определяется частотой выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-131">**Milestone Name** : This date is dictated by the invoice frequency.</span></span>
    - <span data-ttu-id="9ca5a-132">**Дата вехи** : эта дата определяется частотой выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-132">**Milestone Date** : This date is dictated by the invoice frequency.</span></span>
    - <span data-ttu-id="9ca5a-133">**Сумма вехи** : эта сумма вычисляется путем деления суммы контракта в строке контракта на количество вех в зависимости от частоты и даты начала выставления счетов и запрошенных дат поставки.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-133">**Milestone Amount** : This amount is calculated by dividing the contract amount on the contract line by the number of milestones as dictated by the frequency, billing start, and requested delivery dates.</span></span>

    <span data-ttu-id="9ca5a-134">Если строка контракта имеет значение в поле **Предполагаемая сумма налога** , то это поле также равномерно распределяется по каждой вехе при генерации периодических вех.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-134">If the contract line has a value in the **Estimated Tax amount** field, then this field is also apportioned to each milestone equally when generating periodic milestones.</span></span>

<span data-ttu-id="9ca5a-135">Вехи выставления счетов должны равняться контрактной сумме строки контракта.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-135">Billing milestones should equal the contracted value of the contract line.</span></span> <span data-ttu-id="9ca5a-136">В противном случае вы получите сообщение об ошибке на странице **Строка контракта**.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-136">If they don't, you will receive an  error on the **Contract Line** page.</span></span> <span data-ttu-id="9ca5a-137">Вы можете исправить ошибку, убедившись, что вехи выставления счетов в сумме составляют контрактную сумму строки, путем создания, редактирования или удаления вех.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-137">You can fix the error by verifying that the billing milestones total the contracted value of the line by creating, editing, or deleting milestones.</span></span> <span data-ttu-id="9ca5a-138">После внесения изменений обновите страницу, чтобы удалить ошибку.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-138">After the changes are made, refresh the page to remove the error.</span></span>

### <a name="manually-create-milestones"></a><span data-ttu-id="9ca5a-139">Создание промежуточных этапов вручную</span><span class="sxs-lookup"><span data-stu-id="9ca5a-139">Manually create milestones</span></span>

<span data-ttu-id="9ca5a-140">Вы можете создать вехи с фиксированной ценой вручную, если они не разделяются периодически.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-140">You can generate fixed price milestones manually when they are not periodically split.</span></span> <span data-ttu-id="9ca5a-141">Чтобы вручную создать веху, выполните указанные ниже шаги.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-141">Complete the following steps to manually create a milestone.</span></span>

1. <span data-ttu-id="9ca5a-142">Откройте строку контракта с фиксированной ценой, для которой вы создаете веху, и на вкладке **График выставления счетов** на вложенной сетке выберите **+ Создать новую веху строки контракта**.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-142">Open the fixed price contract line that you are creating a milestone for, and on the **Invoice Schedule** tab, on the subgrid, select **+ Create new Contract line milestone**.</span></span> 
2. <span data-ttu-id="9ca5a-143">На странице **Создание вехи** введите необходимую информацию на основе следующей таблицы.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-143">On the **Milestone Creation** page, enter the required information based on the following table.</span></span>

| <span data-ttu-id="9ca5a-144">Поле</span><span class="sxs-lookup"><span data-stu-id="9ca5a-144">Field</span></span> | <span data-ttu-id="9ca5a-145">Размещение</span><span class="sxs-lookup"><span data-stu-id="9ca5a-145">Location</span></span> | <span data-ttu-id="9ca5a-146">Релевантность, цель и руководство</span><span class="sxs-lookup"><span data-stu-id="9ca5a-146">Relevance, purpose, and guidance</span></span> | <span data-ttu-id="9ca5a-147">Воздействие на последующие элементы</span><span class="sxs-lookup"><span data-stu-id="9ca5a-147">Downstream impact</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9ca5a-148">Имя вехи</span><span class="sxs-lookup"><span data-stu-id="9ca5a-148">Milestone Name</span></span> | <span data-ttu-id="9ca5a-149">Быстрое создание</span><span class="sxs-lookup"><span data-stu-id="9ca5a-149">Quick Create</span></span> | <span data-ttu-id="9ca5a-150">Текстовое поле для названия вехи.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-150">Text field for the name of the milestone.</span></span> | <span data-ttu-id="9ca5a-151">Это переносится в веху строки контракта по проекту и на счет.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-151">This is carried over to the project contract line milestone and the invoice.</span></span> |
| <span data-ttu-id="9ca5a-152">Задача проекта</span><span class="sxs-lookup"><span data-stu-id="9ca5a-152">Project Task</span></span> | <span data-ttu-id="9ca5a-153">Быстрое создание</span><span class="sxs-lookup"><span data-stu-id="9ca5a-153">Quick Create</span></span> | <span data-ttu-id="9ca5a-154">Если веха привязана к задаче проекта, используйте эту ссылку, чтобы добавить настраиваемую логику и установить статус вехи на основе статуса задачи.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-154">If the milestone is tied to project task, use this reference to add custom logic to set the milestone status based on the task status.</span></span> | <span data-ttu-id="9ca5a-155">Эта ссылка на задачу не оказывает никакого последующего влияния на приложение.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-155">The application, doesn't have any downstream impact of this reference to a task.</span></span> |
| <span data-ttu-id="9ca5a-156">Дата вехи</span><span class="sxs-lookup"><span data-stu-id="9ca5a-156">Milestone Date</span></span> | <span data-ttu-id="9ca5a-157">Быстрое создание</span><span class="sxs-lookup"><span data-stu-id="9ca5a-157">Quick Create</span></span> | <span data-ttu-id="9ca5a-158">Установите дату, в которую процесс автоматического создания счета должен искать статус этого промежуточного этапа, чтобы учесть его при выставлении счета.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-158">Set the date on which the automatic invoice creation process should look for the status of this milestone to consider it for invoicing.</span></span> | <span data-ttu-id="9ca5a-159">Это переносится в веху строки контракта по проекту и на счет.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-159">This is carried over to the project contract line milestone and the invoice.</span></span> |
| <span data-ttu-id="9ca5a-160">Состояние счета</span><span class="sxs-lookup"><span data-stu-id="9ca5a-160">Invoice Status</span></span> | <span data-ttu-id="9ca5a-161">Быстрое создание</span><span class="sxs-lookup"><span data-stu-id="9ca5a-161">Quick Create</span></span> | <span data-ttu-id="9ca5a-162">Когда создается веха, этот статус всегда устанавливается на **Не готово для выставления счетов** или **Не запущено**.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-162">When a milestone is created, this status is always set to **Not Ready for Invoicing** or **Not Started**.</span></span> | <span data-ttu-id="9ca5a-163">Это переносится в веху строки контракта по проекту и на счет.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-163">This is carried over to the project contract line milestone and the invoice.</span></span> |
| <span data-ttu-id="9ca5a-164">Сумма строки</span><span class="sxs-lookup"><span data-stu-id="9ca5a-164">Line Amount</span></span> | <span data-ttu-id="9ca5a-165">Быстрое создание</span><span class="sxs-lookup"><span data-stu-id="9ca5a-165">Quick Create</span></span> | <span data-ttu-id="9ca5a-166">Сумма или стоимость вехи, по которой клиенту будет выставлен счет.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-166">Amount or value of the milestone that will be invoiced to the customer.</span></span> | <span data-ttu-id="9ca5a-167">Это переносится в веху строки контракта по проекту и на счет.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-167">This is carried over to the project contract line milestone and the invoice.</span></span> |
| <span data-ttu-id="9ca5a-168">Налог</span><span class="sxs-lookup"><span data-stu-id="9ca5a-168">Tax</span></span> | <span data-ttu-id="9ca5a-169">Быстрое создание</span><span class="sxs-lookup"><span data-stu-id="9ca5a-169">Quick Create</span></span> | <span data-ttu-id="9ca5a-170">Сумма налога, примененная к вехе.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-170">The tax amount applied on the milestone.</span></span> | <span data-ttu-id="9ca5a-171">Это переносится в веху строки контракта по проекту и на счет.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-171">This is carried over to the project contract line milestone and the invoice.</span></span> |

3. <span data-ttu-id="9ca5a-172">Выберите **Сохранить и закрыть**.</span><span class="sxs-lookup"><span data-stu-id="9ca5a-172">Select **Save and Close**.</span></span>
<span data-ttu-id="9ca5a-173">| Сумма строки | Быстрое создание | Сумма или стоимость вехи, по которой клиенту будет выставлен счет | Это распространяется на веху строки контракта по проекту и на счет | | Налог | Быстрое создание | Сумма налога, которая будет применяться к вехе | Это распространяется на веху строки контракта проекта и на счет |</span><span class="sxs-lookup"><span data-stu-id="9ca5a-173">| Line Amount | Quick create | Amount or Value of the Milestone that will be invoiced to the customer | This is propagated to the Project contract line Milestone and to the Invoice | | Tax | Quick create | Tax amount that will be applied on the Milestone | This is propagated to the Project contract line Milestone and to the Invoice |</span></span>
