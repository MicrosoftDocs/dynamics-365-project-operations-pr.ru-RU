---
title: Журнал интеграции в Project Operations
description: В этой статье содержится информация о работе с журналом интеграции в Project Operations.
author: sigitac
ms.date: 09/22/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: e947fe895a1caa9c9ea092597957a859cd8d61c9
ms.sourcegitcommit: b1c26ea57be721c5b0b1a33f2de0380ad102648f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/20/2022
ms.locfileid: "9541094"
---
# <a name="integration-journal-in-project-operations"></a>Журнал интеграции в Project Operations

_**Относится к:** Project Operations для сценариев на основе ресурсов/без запасов_

Записи о времени, расходах, сборах и материалах создают транзакции **Фактически**, которые представляют собой операционное представление работы, выполненной по проекту. Dynamics 365 Project Operations предоставляет бухгалтерам инструмент для проверки транзакций и корректировки атрибутов учета по мере необходимости. После завершения проверки и корректировок проводки разносятся во вспомогательную книгу проекта и главную книгу. Бухгалтер может выполнять эти действия, используя журнал **Интеграция Project Operations Integration**(**Dynamics 365 Finance** > **Управление и учет по проектам** > **Журналы** > **Журнал интеграции Project Operations**).

![Поток журнала интеграции.](./media/IntegrationJournal.png)

### <a name="create-records-in-the-project-operations-integration-journal"></a>Создание записей в журнале интеграции Project Operations

Записи в журнале интеграции Project Operations создаются с использованием периодического процесса **Импорт из промежуточной таблицы**. Вы можете запустить этот процесс, выбрав **Dynamics 365 Finance** > **Управление и учет по проектам** > **Периодические операции** > **Интеграция Project Operations** > **Импорт из промежуточной таблицы**. Вы можете запустить процесс в интерактивном режиме или настроить его для работы в фоновом режиме, как требуется.

При запуске периодического процесса обнаруживаются все фактические данные, которые еще не добавлены в журнал интеграции Project Operations. Создается строка журнала для каждой фактической транзакции.
Система группирует строки журнала в отдельные журналы на основе значения, выбранного в поле **Единица измерения периода в журнале интеграции Project Operations** (**Finance** > **Управление и учет по проектам** > **Настройка** > **Параметры модуля "Управление и учет по проектам"**, вкладка **Project Operations в Dynamics 365 Customer Engagement**). Возможные значения для этого поля:

  - **Дни**: фактические данные сгруппированы по дате транзакции. На каждый день создается отдельный журнал.
  - **Месяцы**: фактические данные сгруппированы по календарным месяцам. На каждый месяц создается отдельный журнал.
  - **Годы**: фактические данные сгруппированы по календарным годам. На каждый год создается отдельный журнал.
  - **Все**: все фактические транзакции включаются в один журнал интеграции. Если журнал недоступен во время выполнения периодического процесса, например, если журнал находится в процессе разноски транзакций, создается новый журнал.

Строки журнала создаются на основе фактических данных по проекту. Следующий список включает некоторые из наиболее примечательных правил по умолчанию и правил преобразования:

  - Каждая фактическая транзакция проекта имеет строку в журнале интеграции Project Operations. Себестоимость и операции продажи, за которые не выставлены счета, для типа выставления счетов по времени и материалам показаны в отдельных строках.
  - Поле **Дата** представляет дату транзакции. Поле **Дата отчетности** представляет дату, когда транзакция записана в книгу учета. Если дата отчетности приходится на [закрытый финансовый период](/dynamics365/finance/general-ledger/close-general-ledger-at-period-end), а параметр **Автоматически устанавливать дату учета равной периоду открытия ГК** установлен на вкладке **Финансы** страницы **Параметры управления и учета по проектам**, система скорректирует дату учета транзакции на первую дату в следующем открытом периоде книги учета.
  - В поле **Ваучер** отображается номер ваучера для каждой фактической транзакции. Последовательность номеров ваучеров определяется на вкладке **Номерные последовательности** на странице **Параметры управления и учета по проектам**. Каждой строке присваивается новый номер. После разноски ваучера вы можете просмотреть, как связаны затраты и транзакции продажи, по которым не выставлены счета, выбрав **Связанные ваучеры** на странице **Проводка ваучера**.
  - Поле **Категория** представляет транзакцию проекта и значения по умолчанию, основанные на категории транзакции для связанных фактических данных проекта.
    - Если **Категория транзакции** устанавливается в фактических данных проекта и связанная **Категория проекта** существует в данном юридическом лице, категория по умолчанию соответствует этой категории проекта.
    - Если для фактического значения по проекту не задана **Категория проводки**, система использует значение в поле **Значения по умолчанию категорий проектов** на вкладке **Project Operations в Dynamics 365 Customer Engagement** страницы **Параметры модуля "Управление и учет по проектам"**.
  - Поле **Ресурс** представляет ресурс проекта, связанный с этой транзакцией. Ресурс используется в качестве ссылки в предложениях по счетам проекта для клиентов.
  - Значение поля **Валютный курс** по умолчанию равно **валютному курсу** , заданному в Dynamics 365 Finance. Если настройка обменного курса отсутствует, периодический процесс **Импорт из промежуточной таблицы** не будет добавлять запись в журнал, а в журнал выполнения задания будет добавлено сообщение об ошибке.
  - Поле **Свойство строки** представляет тип выставления счетов в фактических данных по проекту. Свойство строки и сопоставление типа выставления счетов задаются на вкладке **Project Operations в Dynamics 365 Customer Engagement** страницы **Параметры модуля "Управление и учет по проектам"**.

В строках журнала интеграции Project Operations можно обновить только следующие атрибуты учета:

- **Налоговая группа выставления счетов** и **Налоговая группа номенклатур выставления счетов**
- **Финансовые аналитики** (с использованием действия **Распределить суммы**)

Строки журнала интеграции можно удалить. Однако строки журнала интеграции можно удалить, однако любые неопубликованные строки будут снова вставлены в журнал после повторного запуска периодического процесса **Импорт из промежуточной таблицы**.

### <a name="post-the-project-operations-integration-journal"></a>Разноска журнала интеграции Project Operations

При разноске журнала интеграции создаются проводки вспомогательной книги проекта и главной книги. Они используются для последующего выставления счетов клиентам, признания выручки и финансовой отчетности.

Чтобы разнести выбранный журнал интеграции Project Operations нажмите **Разнести** на странице журнала интеграции Project Operations. Все журналы можно разносить автоматически, запустив процесс в **Периодические операции** > **Интеграция с Project Operations** > **Разносить журнал интеграции Project Operations**.

Разноску может выполнять интерактивно или в пакетном режиме. Обратите внимание, что все журналы, содержащие более 100 строк, автоматически разносятся в пакете. Для повышения производительности при пакетной разноске журналов, содержащих много строк, включите параметр **Разносить журнал интеграции Project Operations с использованием нескольких пакетных задач** в рабочей области **Управление функциями**. 

#### <a name="transfer-all-lines-that-have-posting-errors-to-a-new-journal"></a>Перенос всех строк с ошибками разноски в новый журнал

> [!NOTE]
> Чтобы использовать эту функцию, включите параметр **Переносить все строки с ошибками разноски в новый журнал интеграции Project Operations** в рабочей области **Управление функциями**.

Эта функция помогает улучшить работу с журналом интеграции Project Operations. Когда она включена, проблемы с синхронизацией двойной записи и проблемы с настройкой больше не препятствуют разноске действительных журналов. Во время разноски в журнал интеграции Project Operations система проверяет каждую строку в журнале. Она проводит все строки, в которых нет ошибок, и создает новый журнал для всех строк, в которых есть ошибки проводки.

Чтобы просмотреть журналы, в которых есть строки с ошибками проводки, перейдите к пункту **Управление и учет по проектам** \> **Журналы** \> **Журнал интеграции Project Operations** и отфильтруйте список журналов с помощью поля **Исходный журнал**. На следующем рисунке показан пример, когда журналы на странице **Журнал интеграции Project Operations** были отфильтрованы таким образом.

![Исходный журнал показан на странице журнала интеграции Project Operations.](./media/transferLines-originalJournal.png)

Если периодическое пакетное задание настроено для проводки журнала интеграции, будет предпринята повторная попытка проводки, и журналы будут проведены, если проблема синхронизации была устранена. Любые оставшиеся журналы следует исследовать вручную, просматривая журналы и предпринимая необходимые действия.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
