---
title: Ценообразование для проекта
description: В этом разделе представлена информация о том, как работает ценообразование в Dynamics 365 Project Service Automation.
author: rumant
ms.custom:
- dyn365-projectservice
ms.date: 03/11/2019
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.reviewer: johnmichalak
ms.openlocfilehash: c9a5e1ef52eec99ee580258b5dd6db9823cdb4cb
ms.sourcegitcommit: c0792bd65d92db25e0e8864879a19c4b93efb10c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2022
ms.locfileid: "8576470"
---
# <a name="project-pricing"></a>Ценообразование для проекта 

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

Dynamics 365 Project Service Automation расширяет сущность прайс-листа в Dynamics 365 Sales. 

## <a name="key-entities"></a>Основные сущности

Прайс-лист включает сведения, предоставляемые четырьмя различными сущностями:

- **Прайс-лист** — данная сущность хранит сведений о контексте, валюте, привязке к датам и единицей измерения времени для времени ценообразования. Контекст показывает, выражает ли прайс-лист нормы затрат или нормы продаж. 
- **Валюта** — данная сущность хранит валюту цен в прайс-листе. 
- **Дата** — эта сущность используется, когда система пытается ввести цену по умолчанию в транзакцию. Ценообразование PSA выбирает прайс-лист, имеющий дату действия, включающую дату транзакции. Если ценообразование PSA находит несколько прайс-листов, действующих на дату транзакции, присоединенных к связанному предложению с расценками, контрактом или подразделением, никакая цена по умолчанию не устанавливается. 
- **Время** — данная сущность хранит единицу измерения времени, для которой выражены цены, например дневные или часовые или почасовые расценки. 

Сущность прайс-листа имеет три связанные таблицы, в которых хранятся цены:

  - **Цена роли** — эта таблица хранит расценку для сочетания значений роли и подразделения и используется для настройки цен на основе ролей для кадров.
  - **Цена категории проводки** — эта таблица хранит цены по категории проводки и используется, чтобы задать цены категории расходов.
  - **Позиции прайс-листа** — эта таблица хранит цен для продуктов каталога.

> ![Настройка цен с помощью прайс-листа.](media/basic-guide-12.png)
 
Прайс-лист является тарифной картой. Тарифная карта представляет собой сочетание сущности прайс-листа и связанных строк в таблицах "Цена роли", "Цена категории проводки" и "Позиции прайс-листа".

## <a name="resource-roles"></a>Роли ресурсов

Термин *роль ресурса* обозначает набор навыков, компетенций и сертификаций, которыми должен обладать пользователь, чтобы выполнять определенный набор задач по проекту.

Время сотрудников обычно указывается на основе роли, которую этот ресурс заполняет в конкретном проекте. Для времени сотрудников PSA поддерживает данные о ценах и выставление счетов на основе роли ресурса. Время можно оценивать в любых единицах измерения в группе единиц измерения **Время**.

Группа единиц измерения **Время** создается при установке PSA. Единица измерения по умолчанию — **Час**. Нельзя удалить, переименовать или изменять атрибуты для группы единиц измерения **Время** или для единицы измерения **Час**. Однако можно добавить другие единицы измерения в группе единиц измерения **Время**. Если попытаться удалить группу единиц измерений **Время** или единицу измерения **Час**, это может привести к сбоям в работе бизнес-логики PSA.

> ![Настройка цен по ролям.](media/basic-guide-13.png)
 
## <a name="transaction-categories-and-expense-categories"></a>Категории транзакций и категории расходов

Транспортные и другие расходы, понесенные консультантами по проекту, обычно выставляются клиенту. PSA поддерживает ценообразование категорий расходов с помощью прайс-листов. Билеты на самолет, затраты на проживание и аренду автомобилей — это примеры категорий расходов. Каждая строка прайс-листа для расходов определяет цену для определенной категории расходов. Для цен категорий расходах PSA поддерживает следующие три способа ценообразования:

- **По себестоимости** — счет за расходы выставляется клиенту, наценка не применяется.
- **Процент наценки** — процент сверх фактической себестоимости включается в счет клиенту. 
- **Цена за единицу** — цена для выставления счетов задается для каждой единицы измерения категории расходов. Сумма, включаемая в счет клиента, вычисляется на основе количества единиц измерения расхода из отчета консультанта. Пробег использует метод ценообразования "цена за единицу измерения". Например, категорию расходов "пробег" можно настроить равной 30 долларам США в день или 2 долларам США за милю. Когда консультант сообщает о пробеге по проекту, сумма для включения в счет вычисляется на основе сообщенного консультантом пробега.

> ![Настройка цены для категорий расходов.](media/basic-guide-14.png)
 
## <a name="project-sales-pricing-and-overrides"></a>Цена продажи и переопределения для проекта

Для предложений с расценками и контрактов по проекту прайс-лист проекта имеет другую схему переопределения цен, чем прайс-лист продуктов. В строке предложения с ценами на основе каталога продуктов можно переопределить цену для ролей и категорий непосредственно в строке предложения, поскольку каждая строка предложения указывает ровно на один элемент каталога. Однако в строке предложения на основе проекта невозможно переопределить цену для ролей и категорий непосредственно в строке предложения с расценками. Для поддержки двух разных схем переопределения в PSA добавлена новую связь прайс-листа, прайс-лист по проекту.

> [!NOTE]
> Рекомендуется иметь различные прайс-листы для ваших ресурсов проекта и номенклатур каталога из-за их разного поведения при переопределении цены.

Каждая из следующих сущностей может иметь один или несколько связанных прайс-листов продажи для ценообразования проекта:

- Клиент (организация) 
- Возможная сделка 
- Предложение с расценками 
- Контракт проекта

Связи этих сущностей с прайс-листом указывается прайс-листами проекта. Можно связать один или несколько прайс-листов с сущностями продаж "Клиент", "Возможная сделка", "Предложение" и "Контракт по проекту".

Прайс-лист по умолчанию не вводится автоматически в запись клиента. Однако можно вручную добавить прайс-лист проекта в запись клиента. Тем не менее, добавлять прайс-лист проекта вручную следует только при наличии настраиваемого соглашения по ценам с клиентом. 

Если прайс-лист по проекту присоединен к сущности продаж, PSA проверяет следующие сведения:

- Прайс-листа имеет контекст **Продажи**. 
- Валюта прайс-листа соответствует валюте клиента. 

В контракте проекта PSA использует следующий порядок старшинства для автоматического задания связанных прайс-листов проекта:

1. Предложение с расценками
2. Возможная сделка
3. Клиент 
4. Глобальные параметры для PSA

Если прайс-лист по проекту введен по умолчанию, PSA проверяет, что валюта совпадает с валютой клиента, а также, что введенные прайс-листы по умолчанию имеют контекст **Продажи**.

Можно связать несколько прайс-листов с сущностями "Клиент", "Возможная сделка", "Предложение" и "Контракт по проекту". Эта возможность поддерживает цены по умолчанию на конкретные даты для длительного контракта по проекту, где может потребоваться несколько прайс-листов для учета обновления цен из-за инфляции. Однако если прайс-листы, связанные с сущностью клиента, возможной сделки, предложения или контракта по проекту, имеют перекрывающиеся даты действия, то цены по умолчанию могут быть неверными. Поэтому необходимо убедиться в том, что прайс-листы проекта, имеющие перекрывающие даты действия, не связанные с этими сущностями.

### <a name="deal-specific-price-overrides"></a>Переопределения цены для конкретных сделок

В PSA можно создать переопределения для конкретных сделок для выбранных цен в прайс-листах проекта, которые введены по умолчанию в предложении с расценками или контракте по проекту.

По умолчанию контракт по проекту всегда получает копию основного прайс-листа продаж вместо прямой ссылки на него. Это поведение помогает гарантировать, что соглашения о ценах, которые имеются с клиентом для отчета о работе (SOW), не изменятся, если основной прайс-лист изменить.

Однако в предложении с расценками можно использовать основной прайс-лист. Кроме того, можно скопировать основной прайс-лист и изменить его, чтобы создать настраиваемый прайс-листа, который применяется только к этому предложению с расценками. Для создания нового прайс-листа, который специфичен для предложения с расценками, на странице **Предложение с расценками** выберите **Создать пользовательские цены**. Можно получить доступ к специфическому для сделки прайс-листу проекта только из предложения с расценками. 

При создании настраиваемого прайс-листа проекта, копируются только компоненты проекта прайс-листа. Другими словами, новый прайс-лист создается как копия существующего прайс-листа по проекту, который вложен в предложение с расценками, и этот новый прайс-лист имеет только цены связанной роли и цены категории транзакции.

> ![Просмотр и настройка настраиваемого ценообразования для контракта по проекту.](media/basic-guide-15.png)
  
## <a name="tracking-costs"></a>Отслеживание затрат

PSA отслеживает затраты для использования времени человеческих ресурсов по проектам. Оно также отслеживает затраты для других расходов, понесенных во время проекта, например транспортных расходов.

Как и ставки для выставления счетов, ставки расходов для сотрудников также настраиваются с помощью прайс-листов. Ниже приведены основные различия в поведении прайс-листа себестоимости и прайс-листа продаж:

- Ставка себестоимости ресурса не может быть переопределена для конкретного проекта, контракта или предложения с расценками. Однако ставки выставления счетов можно переопределять для отдельных сделок, если сделаны изменения, связанные с конкретным характером сделки. 

- Следующий порядок используется для разрешения прайс-листа себестоимости:

    1. Прайс-лист себестоимости, который вложен в подразделение.
    2. Прайс-лист себестоимости, который вложен в параметры Project Service. Поскольку прайс-листы себестоимости во многих различных валютах могут быть вложены в параметры Project Service, PSA сопоставляет валюты между валютой контрактного подразделения проекта, контракта или предложения с расценками и валютой прайс-листа себестоимости.
    3. Для расходов методы ценообразования "по себестоимости" и "с наценкой к себестоимости" не применяются к прайс-листам себестоимости. Даже если эти методы ценообразования используются в строках прайс-листа себестоимости, чтобы задать настроить значения себестоимости категории транзакций, система игнорирует их, и никакая себестоимость по умолчанию не вводится.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
