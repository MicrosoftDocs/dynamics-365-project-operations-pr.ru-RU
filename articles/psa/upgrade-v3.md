---
title: Рекомендации по обновлению - Microsoft Dynamics 365 Project Service Automation версии 2.x или 1.x до версии 3
description: В этом разделе приведены сведения о том, что необходимо учитывать при обновлении Project Service Automation версии 2.x или 1.x до версии 3.
ms.prod: ''
ms.custom:
- dyn365-projectservice
ms.date: 11/13/2018
ms.topic: article
author: JohnPBurrows
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
- ProjectOperations
ms.openlocfilehash: 04ae6aa3ef6a14a6f85dce3eaa5af01e0adce9ba
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2021
ms.locfileid: "6014905"
---
# <a name="upgrade-considerations---psa-version-2x-or-1x-to-version-3"></a><span data-ttu-id="ceff7-103">Моменты, которые следует учитывать при обновлении PSA версии 2.x или 1.x до версии 3</span><span class="sxs-lookup"><span data-stu-id="ceff7-103">Upgrade considerations - PSA version 2.x or 1.x to version 3</span></span>

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-1x-2x](../includes/cc-applies-to-psa-app-1x-2x.md)]

## <a name="project-service-automation-and-field-service"></a><span data-ttu-id="ceff7-104">Project Service Automation и Field Service</span><span class="sxs-lookup"><span data-stu-id="ceff7-104">Project Service Automation and Field Service</span></span>
<span data-ttu-id="ceff7-105">И в Dynamics 365 Project Service Automation, и в Dynamics 365 Field Service используется решение Universal Resourcing Scheduling (URS) для планирования ресурсов.</span><span class="sxs-lookup"><span data-stu-id="ceff7-105">Both Dynamics 365 Project Service Automation and Dynamics 365 Field Service use the Universal Resourcing Scheduling (URS) solution for resource scheduling.</span></span> <span data-ttu-id="ceff7-106">Если в вашем экземпляре есть Project Service Automation и Field Service, обновите оба решения до последней версии.</span><span class="sxs-lookup"><span data-stu-id="ceff7-106">If you have Project Service Automation and Field Service in your instance, upgrade both solutions to the latest version.</span></span> <span data-ttu-id="ceff7-107">Для Project Service Automation это версия 3.x.</span><span class="sxs-lookup"><span data-stu-id="ceff7-107">For Project Service Automation, that is version 3.x.</span></span> <span data-ttu-id="ceff7-108">Для Field Service это версия 8.x.</span><span class="sxs-lookup"><span data-stu-id="ceff7-108">For Field Service, it is version 8.x.</span></span> <span data-ttu-id="ceff7-109">При обновлении Project Service Automation или Field Service будет установлена последняя версия URS.</span><span class="sxs-lookup"><span data-stu-id="ceff7-109">Upgrading Project Service Automation or Field Service will install the latest version of URS.</span></span> <span data-ttu-id="ceff7-110">Если решения Project Service Automation и Field Service в одном экземпляре не обновлены до последней версии, это может иметь некоторую несогласованность.</span><span class="sxs-lookup"><span data-stu-id="ceff7-110">If both the Project Service Automation and Field Service solutions in the same instance aren’t upgraded to the latest version, there might be some inconsistent behavior.</span></span>

## <a name="resource-assignments"></a><span data-ttu-id="ceff7-111">Назначения ресурсов</span><span class="sxs-lookup"><span data-stu-id="ceff7-111">Resource assignments</span></span>
<span data-ttu-id="ceff7-112">В Project Service Automation версии 2 и версии 1 назначения задач сохранялись как дочерние задачи (также называемые задачами строки) в **сущности "Задача"**, и были косвенно связаны с сущностью **Назначение ресурса**.</span><span class="sxs-lookup"><span data-stu-id="ceff7-112">In Project Service Automation version 2 and version 1, task assignments were stored as child tasks (also called line tasks) in the **Task entity**, and indirectly related to the **Resource Assignment** entity.</span></span> <span data-ttu-id="ceff7-113">Задача строки отображалась во всплывающем окне назначения в структурной декомпозиции работ (WBS).</span><span class="sxs-lookup"><span data-stu-id="ceff7-113">The line task was visible in the assignment pop-up window on the Work Breakdown Structure (WBS).</span></span>

![Задачи строк в WBS в Project Service Automation версии 2 и версии 1](media/upgrade-line-task-01.png)

<span data-ttu-id="ceff7-115">В Project Service Automation версии 3 базовая схема назначения резервируемых ресурсов задачам была изменена.</span><span class="sxs-lookup"><span data-stu-id="ceff7-115">In version 3 of Project Service Automation, the underlying schema of assigning bookable resources to tasks has changed.</span></span> <span data-ttu-id="ceff7-116">Задача строки устарела, и существует прямое соотношение 1:1 между задачей в **Сущность задачи** и участником рабочей группы в сущности **Назначение ресурса**.</span><span class="sxs-lookup"><span data-stu-id="ceff7-116">The line task has been deprecated and there is a direct 1:1 relationship between the task in the **Task entity** and the team member in the **Resource Assignment** entity.</span></span> <span data-ttu-id="ceff7-117">Задачи которые назначены участнику рабочей группы проекта теперь хранятся непосредственно в сущности назначения ресурсов.</span><span class="sxs-lookup"><span data-stu-id="ceff7-117">Tasks that are assigned to a project team member are now stored directly in the Resource Assignment entity.</span></span>  

<span data-ttu-id="ceff7-118">Эти изменения влияют на обновление любых существующих проектов, которые имеют назначения ресурсов для именованных резервируемых ресурсов и универсальных ресурсов в рабочей группе проекта.</span><span class="sxs-lookup"><span data-stu-id="ceff7-118">These changes impact the upgrade of any existing projects that have resource assignments for named bookable resources and generic resources on a project team.</span></span> <span data-ttu-id="ceff7-119">В этом разделе представлены рекомендации которые необходимо учитывать для проектов при обновлении до версии 3.</span><span class="sxs-lookup"><span data-stu-id="ceff7-119">This topic provides the considerations that you will need to take into account for your projects when you upgrade to version 3.</span></span> 

### <a name="tasks-assigned-to-named-resources"></a><span data-ttu-id="ceff7-120">Задачи назначаются именованным ресурсам</span><span class="sxs-lookup"><span data-stu-id="ceff7-120">Tasks assigned to named resources</span></span>
<span data-ttu-id="ceff7-121">Используя основную сущность задачи, задачи в версии 2 и версии 1 позволили участникам рабочей группы изобразить роль, отличную от их определенной роли по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ceff7-121">Using the underlying task entity, tasks in version 2 and version 1 allowed team members to portray a role other than their default defined role.</span></span> <span data-ttu-id="ceff7-122">Например, Евгении Кольцовой, которой по умолчанию назначена роль Руководителя программы, может быть назначена задача с ролью Разработчика.</span><span class="sxs-lookup"><span data-stu-id="ceff7-122">For example, Gracie George, who’s by default assigned the role of Program Manager, could be assigned to a task with the role of Developer.</span></span> <span data-ttu-id="ceff7-123">В версии 3, роль именованного участника рабочей группы всегда используется по умолчанию, поэтому любая задача, назначенная Евгении, использует ее роль по умолчанию Руководителя программы.</span><span class="sxs-lookup"><span data-stu-id="ceff7-123">In version 3, the role of a named team member is always the default, so any task that Gracie George is assigned to uses Gracie's default role of Program Manager.</span></span>

<span data-ttu-id="ceff7-124">Если вы назначили ресурс задаче вне их роли по умолчанию в версии 2 и версии 1, при обновлении названному ресурсу будет назначена роль по умолчанию для всех назначений задачи, независимо от назначения роли в версии 2.</span><span class="sxs-lookup"><span data-stu-id="ceff7-124">If you have assigned a resource to a task outside of their default role in version 2 and version 1, when you upgrade, the named resource will be assigned the default role for all task assignments, regardless of role assignment in version 2.</span></span> <span data-ttu-id="ceff7-125">Это назначение приведет к различиям в вычисляемых оценках от версии 2 или версии 1 к версии 3, поскольку оценки вычисляются на основе роли ресурса, а не назначения задач строки.</span><span class="sxs-lookup"><span data-stu-id="ceff7-125">This assignment results in differences in the calculated estimates from version 2 or version 1 to version 3 because estimates are calculated based on the role of the resource and not the line task assignment.</span></span> <span data-ttu-id="ceff7-126">Например, в версии 2 две задачи были назначены Анисе Комаровой.</span><span class="sxs-lookup"><span data-stu-id="ceff7-126">For example, in version 2, two tasks have been assigned to Ashley Chinn.</span></span> <span data-ttu-id="ceff7-127">Роль в задаче строки для задачи 1 — Разработчик, а для задачи 2 — Руководитель программы.</span><span class="sxs-lookup"><span data-stu-id="ceff7-127">The role on the line task for task 1 is Developer and for task 2, Program Manager.</span></span> <span data-ttu-id="ceff7-128">Аниса Комарова имеет роль Руководителя программы по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ceff7-128">Ashley Chinn has the default role of Program Manager.</span></span>

![Несколько ролей назначены на один ресурс](media/upgrade-multiple-roles-02.png)

<span data-ttu-id="ceff7-130">Поскольку роли Разработчика и Руководителя программы отличаются, оценки расходов и продаж следующие:</span><span class="sxs-lookup"><span data-stu-id="ceff7-130">Because the roles of Developer and Program Manager differ, the cost and sales estimates are as follows:</span></span>

![Оценки расходов для роли ресурса](media/upggrade-cost-estimates-03.png)

![Оценки продаж для ролей ресурса](media/upgrade-sales-estimates-04.png)

<span data-ttu-id="ceff7-133">При обновлении до версии 3 задачи строки заменяются назначениями ресурсов в задаче участника рабочей группы резервируемого ресурса.</span><span class="sxs-lookup"><span data-stu-id="ceff7-133">When you upgrade to version 3, line tasks are replaced with resource assignments on the task of the bookable resource team member.</span></span> <span data-ttu-id="ceff7-134">Назначение будет использовать роль резервируемого ресурса по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ceff7-134">The assignment will use the default role of the bookable resource.</span></span> <span data-ttu-id="ceff7-135">На следующем рисунке ресурсом является Аниса Комарова, имеющая роль Руководителя программы.</span><span class="sxs-lookup"><span data-stu-id="ceff7-135">In the following graphic, Ashley Chinn who has a role of Program Manager, is the resource.</span></span>

![Назначения ресурсов](media/resource-assignment-v2-05.png)

<span data-ttu-id="ceff7-137">Поскольку оценки основаны на роли ресурса по умолчанию, оценки продаж и расходов могут измениться.</span><span class="sxs-lookup"><span data-stu-id="ceff7-137">Because the estimates are based on the default role for the resource, the sales and cost estimates may change.</span></span> <span data-ttu-id="ceff7-138">На следующем рисунке вы больше не видите роль **Разработчик**, поскольку эта роль теперь взята из роли по умолчанию для резервируемого ресурса.</span><span class="sxs-lookup"><span data-stu-id="ceff7-138">In the following graphic, you no longer see the **Developer** role as the role is now taken from the bookable resource’s default role.</span></span>

<span data-ttu-id="ceff7-139">![Оценки расходов для ролей по умолчанию](media/resource-assignment-cost-estimate-06.png)
![Оценки продаж для ролей по умолчанию](media/resource-assignment-sales-estimate-07.png)</span><span class="sxs-lookup"><span data-stu-id="ceff7-139">![Cost estimates for default roles](media/resource-assignment-cost-estimate-06.png)
![Sales estimate for default roles](media/resource-assignment-sales-estimate-07.png)</span></span>

<span data-ttu-id="ceff7-140">По завершении обновления, можно изменить роли участников команды, чтобы она отличалась от назначенной по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ceff7-140">After upgrade is complete, you can edit a team member's role to be something other than the assigned default.</span></span> <span data-ttu-id="ceff7-141">Однако, если вы измените роль участников рабочей группы, она будет изменена во всех назначенных им задачах, поскольку участникам рабочей группы не может быть назначено несколько ролей в версии 3.</span><span class="sxs-lookup"><span data-stu-id="ceff7-141">However, if you change a team members role, it will be changed on all of their assigned tasks because team members can't be assigned multiple roles in version 3.</span></span>

![Обновление роли ресурса](media/resource-role-assignment-08.png)

<span data-ttu-id="ceff7-143">Это также верно для задач строки, которые были назначены именованным ресурсам, когда вы изменяете подразделение ресурса со стандартной по умолчанию на другое подразделение.</span><span class="sxs-lookup"><span data-stu-id="ceff7-143">This is also true for line tasks that were assigned to named resources when you change the resource’s organization unit from the default to another organization unit.</span></span> <span data-ttu-id="ceff7-144">После завершения обновления версии 3 в назначении будет использоваться подразделение ресурса по умолчанию вместо того, которое задано в задаче строки.</span><span class="sxs-lookup"><span data-stu-id="ceff7-144">After the version 3 upgrade is complete, the assignment will use the resource’s default organization unit instead of the one set on the line task.</span></span>

### <a name="tasks-assigned-to-generic-resources"></a><span data-ttu-id="ceff7-145">Задачи назначаются универсальным ресурсам</span><span class="sxs-lookup"><span data-stu-id="ceff7-145">Tasks assigned to generic resources</span></span>
<span data-ttu-id="ceff7-146">В версии 2 и версии 1 вы можете установить роль и подразделение в задаче, а затем использовать функцию **Создать рабочую группу** для генерации универсальных ресурсов на основе атрибутов, установленных в задаче.</span><span class="sxs-lookup"><span data-stu-id="ceff7-146">In version 2 and version 1, you can set the role and org unit on a task and then use the **Generate team** feature to generate generic resources based on the attributes set on the task.</span></span> <span data-ttu-id="ceff7-147">В версии 3, вы создаете универсальных участников рабочей группы с ролью и подразделением, а затем назначаете участников рабочей группы задачам.</span><span class="sxs-lookup"><span data-stu-id="ceff7-147">In version 3, you create the generic team members with role and org unit, and then assign the team members to tasks.</span></span>

<span data-ttu-id="ceff7-148">В версии 2 и версии 1 проекты с универсальными ресурсами могут находиться в двух состояниях или в обоих состояниях на уровне задач.</span><span class="sxs-lookup"><span data-stu-id="ceff7-148">In version 2 and version 1, projects with generic resources can be in two states, or a mix of both at the task level.</span></span> <span data-ttu-id="ceff7-149">Например, могут быть следующие сценарии:</span><span class="sxs-lookup"><span data-stu-id="ceff7-149">For example, you can have the following scenarios:</span></span>

- <span data-ttu-id="ceff7-150">Задачи с установленными ролями и подразделениями, но без назначения дочерних ресурсов были созданы.</span><span class="sxs-lookup"><span data-stu-id="ceff7-150">Tasks with roles and org units set, but no affiliated resource assignment has been generated.</span></span>
- <span data-ttu-id="ceff7-151">Задачи с назначениями универсального ресурса участников рабочей группы которые были назначены путем создания универсального ресурса с использованием функции **Универсальная рабочая группа**.</span><span class="sxs-lookup"><span data-stu-id="ceff7-151">Tasks with generic team member resource assignments that were assigned by creating generic resource using the **Generate team** feature.</span></span>

<span data-ttu-id="ceff7-152">Перед началом обновления мы рекомендуем повторно создать рабочую группу для каждого проекта, в котором есть задачи, назначенные универсальным ресурсам, или для которых еще не запущен процесс создания рабочей группы.</span><span class="sxs-lookup"><span data-stu-id="ceff7-152">Before you begin your upgrade, we recommend that you regenerate the team for each project that has tasks assigned to generic resources or has yet to have the generate team process run on them.</span></span>

<span data-ttu-id="ceff7-153">Для задач, которые назначены универсальным участникам рабочей группы, которые были созданы с помощью **Создать рабочую группу**, обновление оставит универсальный ресурс в рабочей группе и оставит назначение этому универсальному участнику рабочей группы.</span><span class="sxs-lookup"><span data-stu-id="ceff7-153">For tasks that are assigned to generic team members that were generated with **Generate Team**, the upgrade will leave the generic resource on the team and leave the assignment to that generic team member.</span></span> <span data-ttu-id="ceff7-154">Рекомендуется создать потребность в ресурсах для универсального участника рабочей группы после обновления, однако до резервирования и отправки запроса ресурса.</span><span class="sxs-lookup"><span data-stu-id="ceff7-154">We recommend that you generate the resource requirement for the generic team member after the upgrade but before you book or submit a resource request.</span></span> <span data-ttu-id="ceff7-155">Это сохранит любые назначения подразделений для универсального участника рабочей группы, которые отличаются от контрактных подразделений проекта.</span><span class="sxs-lookup"><span data-stu-id="ceff7-155">This will preserve any org unit assignments on the generic team members that are different than the project’s contracting org unit.</span></span>

<span data-ttu-id="ceff7-156">Например, в проекте Project Z, контрактным подразделением является Contoso US.</span><span class="sxs-lookup"><span data-stu-id="ceff7-156">For example, in the Project Z project, the contracting org unit is Contoso US.</span></span> <span data-ttu-id="ceff7-157">В плане проекта задачам тестирования на этапе реализации была назначена роль Технического консультанта, а назначенным подразделением является Contoso India.</span><span class="sxs-lookup"><span data-stu-id="ceff7-157">In the project plan, testing tasks within the Implementation phase have been assigned the role Technical Consultant and the assigned org unit is Contoso India.</span></span>

![Подразделение этапа реализации](media/org-unit-assignment-09.png)

<span data-ttu-id="ceff7-159">После этапа реализации задача тестирования интеграции назначена роли Технический консультант, но организация установлена на Contoso US.</span><span class="sxs-lookup"><span data-stu-id="ceff7-159">After the implementation phase, the integration test task is assigned to the role Technical consultant, but the org is set to Contoso US.</span></span>  

![Назначение организации задачи тестирования интеграции](media/org-unit-generate-team-10.png)

<span data-ttu-id="ceff7-161">При создании группы для проекта два универсальных участника рабочей группы создаются по причине разных подразделений в задачах.</span><span class="sxs-lookup"><span data-stu-id="ceff7-161">When you generate a team for the project, two generic team members are created due to the different org units on the tasks.</span></span> <span data-ttu-id="ceff7-162">Техническому консультанту 1 будут назначены задачи Contoso India, а Техническому консультанту 2 — задачи Contoso US.</span><span class="sxs-lookup"><span data-stu-id="ceff7-162">Technical consultant 1 will be assigned the Contoso India tasks and Technical consultant 2 will have the Contoso US tasks.</span></span>  

![Созданные универсальные участники рабочей группы](media/org-unit-assignments-multiple-resources-11.png)

> [!NOTE]
> <span data-ttu-id="ceff7-164">В Project Service Automation версии 2 и версии 1 у участника рабочей группы нет подразделения, которое велось бы для задачи строки.</span><span class="sxs-lookup"><span data-stu-id="ceff7-164">In Project Service Automation version 2 and version 1, the team member does not hold the organization unit, that is maintained on the line task.</span></span>

![Задачи строк версии 2 и версии 1 в Project Service Automation](media/line-tasks-12.png)

<span data-ttu-id="ceff7-166">Можно увидеть подразделение на уровне представления оценок.</span><span class="sxs-lookup"><span data-stu-id="ceff7-166">You can see the organization unit on the estimates view.</span></span> 

![Оценки подразделения](media/org-unit-estimates-view-13.png)
 
<span data-ttu-id="ceff7-168">Когда обновление завершено, подразделение в задаче строки, которая соответствует универсальному участнику рабочей группы, добавляется в универсальному участнику рабочей группы и задача строки удаляется.</span><span class="sxs-lookup"><span data-stu-id="ceff7-168">When the upgrade is complete, the organization unit on the line task that corresponds to the generic team member is added to the generic team member and the line task is removed.</span></span> <span data-ttu-id="ceff7-169">По этой причине, рекомендуется перед обновлением создать или повторно создать рабочую группу для каждого проекта, содержащего универсальные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="ceff7-169">Because of this, we recommend that before you upgrade, you generate or regenerate the team on each project that contains generic resources.</span></span>

<span data-ttu-id="ceff7-170">Для задач, которые назначены роли с подразделением, отличным от подразделения контракта по проекту, и рабочая группа не была создана, обновление создаст универсального участника рабочей группы для роли, но будет использовать подразделение по контракту проекта для подразделения участника рабочей группы.</span><span class="sxs-lookup"><span data-stu-id="ceff7-170">For tasks that are assigned to a role with an org unit that differs from the org unit of the contracting project, and a team has not been generated, upgrade will create a generic team member for the role, but will use the contracting unit of the project for the team member's org unit.</span></span> <span data-ttu-id="ceff7-171">Возвращаясь к примеру с Project Z, это означает, что подразделению по контракту Contoso US и задачам тестирования плана проекта в рамках этапа реализации назначена роли Технический консультант с подразделением, назначенным Contoso India.</span><span class="sxs-lookup"><span data-stu-id="ceff7-171">Referring back to the example with Project Z, the contracting org unit Contoso US, and the project plan testing tasks within the Implementation phase have been assigned the role Technical Consultant with the org unit assigned to Contoso India.</span></span> <span data-ttu-id="ceff7-172">Задача тестирования интеграции которая завершается после того, как этап реализации был назначен роли Технический консультант.</span><span class="sxs-lookup"><span data-stu-id="ceff7-172">The Integration test task that is completed after the Implementation phase has been assigned to the role Technical consultant.</span></span> <span data-ttu-id="ceff7-173">Подразделением является Contoso US и рабочая группа не была создана.</span><span class="sxs-lookup"><span data-stu-id="ceff7-173">The org unit is Contoso US and a team has not been generated.</span></span> <span data-ttu-id="ceff7-174">При обновлении будет создан один участник рабочей группы, Технический консультант, которому назначены часы всех трех задач, и подразделение Contoso US, являющееся подразделением проекта по контракту.</span><span class="sxs-lookup"><span data-stu-id="ceff7-174">Upgrade will create one generic team member, a Technical consultant that has the assigned hours of all three tasks, and an org unit of Contoso US, the project’s contracting org unit.</span></span>   
 
<span data-ttu-id="ceff7-175">Изменение значений по умолчанию для различных подразделений по предоставлению ресурсов на не созданных участниках группы является причиной, по которой рекомендуется создавать или повторно создавать рабочую группу для каждого проекта, содержащего универсальные ресурсы, до обновления, чтобы назначения подразделений не терялись.</span><span class="sxs-lookup"><span data-stu-id="ceff7-175">Changing the default of the different resourcing org units on ungenerated team members is the reason we recommend that you generate or regenerate the team on each project that contains generic resources prior to the upgrade so that the org unit assignments are not lost.</span></span>



[!INCLUDE[footer-include](../includes/footer-banner.md)]