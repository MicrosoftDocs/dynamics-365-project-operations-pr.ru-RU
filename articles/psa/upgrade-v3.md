---
title: Рекомендации по обновлению - Microsoft Dynamics 365 Project Service Automation версии 2.x или 1.x до версии 3
description: В этом разделе приведены сведения о том, что необходимо учитывать при обновлении Project Service Automation версии 2.x или 1.x до версии 3.
ms.prod: ''
ms.custom:
- dyn365-projectservice
ms.date: 11/13/2018
ms.topic: article
author: JohnPBurrows
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
- ProjectOperations
ms.openlocfilehash: b29ef5d6d2c1c97658d79bbbe82e5893adeafe4d20354e90058dde79b67cb716
ms.sourcegitcommit: 7f8d1e7a16af769adb43d1877c28fdce53975db8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2021
ms.locfileid: "7000097"
---
# <a name="upgrade-considerations---psa-version-2x-or-1x-to-version-3"></a>Моменты, которые следует учитывать при обновлении PSA версии 2.x или 1.x до версии 3

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-1x-2x](../includes/cc-applies-to-psa-app-1x-2x.md)]

## <a name="project-service-automation-and-field-service"></a>Project Service Automation и Field Service
И в Dynamics 365 Project Service Automation, и в Dynamics 365 Field Service используется решение Universal Resourcing Scheduling (URS) для планирования ресурсов. Если в вашем экземпляре есть Project Service Automation и Field Service, обновите оба решения до последней версии. Для Project Service Automation это версия 3.x. Для Field Service это версия 8.x. При обновлении Project Service Automation или Field Service будет установлена последняя версия URS. Если решения Project Service Automation и Field Service в одном экземпляре не обновлены до последней версии, это может иметь некоторую несогласованность.

## <a name="resource-assignments"></a>Назначения ресурсов
В Project Service Automation версии 2 и версии 1 назначения задач сохранялись как дочерние задачи (также называемые задачами строки) в **сущности "Задача"**, и были косвенно связаны с сущностью **Назначение ресурса**. Задача строки отображалась во всплывающем окне назначения в структурной декомпозиции работ (WBS).

![Задачи строк в WBS в Project Service Automation версии 2 и версии 1.](media/upgrade-line-task-01.png)

В Project Service Automation версии 3 базовая схема назначения резервируемых ресурсов задачам была изменена. Задача строки устарела, и существует прямое соотношение 1:1 между задачей в **Сущность задачи** и участником рабочей группы в сущности **Назначение ресурса**. Задачи которые назначены участнику рабочей группы проекта теперь хранятся непосредственно в сущности назначения ресурсов.  

Эти изменения влияют на обновление любых существующих проектов, которые имеют назначения ресурсов для именованных резервируемых ресурсов и универсальных ресурсов в рабочей группе проекта. В этом разделе представлены рекомендации которые необходимо учитывать для проектов при обновлении до версии 3. 

### <a name="tasks-assigned-to-named-resources"></a>Задачи назначаются именованным ресурсам
Используя основную сущность задачи, задачи в версии 2 и версии 1 позволили участникам рабочей группы изобразить роль, отличную от их определенной роли по умолчанию. Например, Евгении Кольцовой, которой по умолчанию назначена роль Руководителя программы, может быть назначена задача с ролью Разработчика. В версии 3, роль именованного участника рабочей группы всегда используется по умолчанию, поэтому любая задача, назначенная Евгении, использует ее роль по умолчанию Руководителя программы.

Если вы назначили ресурс задаче вне их роли по умолчанию в версии 2 и версии 1, при обновлении названному ресурсу будет назначена роль по умолчанию для всех назначений задачи, независимо от назначения роли в версии 2. Это назначение приведет к различиям в вычисляемых оценках от версии 2 или версии 1 к версии 3, поскольку оценки вычисляются на основе роли ресурса, а не назначения задач строки. Например, в версии 2 две задачи были назначены Анисе Комаровой. Роль в задаче строки для задачи 1 — Разработчик, а для задачи 2 — Руководитель программы. Аниса Комарова имеет роль Руководителя программы по умолчанию.

![Несколько ролей назначены на один ресурс.](media/upgrade-multiple-roles-02.png)

Поскольку роли Разработчика и Руководителя программы отличаются, оценки расходов и продаж следующие:

![Оценки расходов для роли ресурса.](media/upggrade-cost-estimates-03.png)

![Оценки продаж для ролей ресурса.](media/upgrade-sales-estimates-04.png)

При обновлении до версии 3 задачи строки заменяются назначениями ресурсов в задаче участника рабочей группы резервируемого ресурса. Назначение будет использовать роль резервируемого ресурса по умолчанию. На следующем рисунке ресурсом является Аниса Комарова, имеющая роль Руководителя программы.

![Назначения ресурса.](media/resource-assignment-v2-05.png)

Поскольку оценки основаны на роли ресурса по умолчанию, оценки продаж и расходов могут измениться. На следующем рисунке вы больше не видите роль **Разработчик**, поскольку эта роль теперь взята из роли по умолчанию для резервируемого ресурса.

![Оценки расходов для ролей по умолчанию.](media/resource-assignment-cost-estimate-06.png)
![Оценки продаж для ролей по умолчанию.](media/resource-assignment-sales-estimate-07.png)

По завершении обновления, можно изменить роли участников команды, чтобы она отличалась от назначенной по умолчанию. Однако, если вы измените роль участников рабочей группы, она будет изменена во всех назначенных им задачах, поскольку участникам рабочей группы не может быть назначено несколько ролей в версии 3.

![Обновление роли ресурса.](media/resource-role-assignment-08.png)

Это также верно для задач строки, которые были назначены именованным ресурсам, когда вы изменяете подразделение ресурса со стандартной по умолчанию на другое подразделение. После завершения обновления версии 3 в назначении будет использоваться подразделение ресурса по умолчанию вместо того, которое задано в задаче строки.

### <a name="tasks-assigned-to-generic-resources"></a>Задачи назначаются универсальным ресурсам
В версии 2 и версии 1 вы можете установить роль и подразделение в задаче, а затем использовать функцию **Создать рабочую группу** для генерации универсальных ресурсов на основе атрибутов, установленных в задаче. В версии 3, вы создаете универсальных участников рабочей группы с ролью и подразделением, а затем назначаете участников рабочей группы задачам.

В версии 2 и версии 1 проекты с универсальными ресурсами могут находиться в двух состояниях или в обоих состояниях на уровне задач. Например, могут быть следующие сценарии:

- Задачи с установленными ролями и подразделениями, но без назначения дочерних ресурсов были созданы.
- Задачи с назначениями универсального ресурса участников рабочей группы которые были назначены путем создания универсального ресурса с использованием функции **Универсальная рабочая группа**.

Перед началом обновления мы рекомендуем повторно создать рабочую группу для каждого проекта, в котором есть задачи, назначенные универсальным ресурсам, или для которых еще не запущен процесс создания рабочей группы.

Для задач, которые назначены универсальным участникам рабочей группы, которые были созданы с помощью **Создать рабочую группу**, обновление оставит универсальный ресурс в рабочей группе и оставит назначение этому универсальному участнику рабочей группы. Рекомендуется создать потребность в ресурсах для универсального участника рабочей группы после обновления, однако до резервирования и отправки запроса ресурса. Это сохранит любые назначения подразделений для универсального участника рабочей группы, которые отличаются от контрактных подразделений проекта.

Например, в проекте Project Z, контрактным подразделением является Contoso US. В плане проекта задачам тестирования на этапе реализации была назначена роль Технического консультанта, а назначенным подразделением является Contoso India.

![Подразделение этапа реализации.](media/org-unit-assignment-09.png)

После этапа реализации задача тестирования интеграции назначена роли Технический консультант, но организация установлена на Contoso US.  

![Назначение организации задачи тестирования интеграции.](media/org-unit-generate-team-10.png)

При создании группы для проекта два универсальных участника рабочей группы создаются по причине разных подразделений в задачах. Техническому консультанту 1 будут назначены задачи Contoso India, а Техническому консультанту 2 — задачи Contoso US.  

![Созданные универсальные участники рабочей группы.](media/org-unit-assignments-multiple-resources-11.png)

> [!NOTE]
> В Project Service Automation версии 2 и версии 1 у участника рабочей группы нет подразделения, которое велось бы для задачи строки.

![Задачи строк версии 2 и версии 1 в Project Service Automation.](media/line-tasks-12.png)

Можно увидеть подразделение на уровне представления оценок. 

![Оценки подразделения.](media/org-unit-estimates-view-13.png)
 
Когда обновление завершено, подразделение в задаче строки, которая соответствует универсальному участнику рабочей группы, добавляется в универсальному участнику рабочей группы и задача строки удаляется. По этой причине, рекомендуется перед обновлением создать или повторно создать рабочую группу для каждого проекта, содержащего универсальные ресурсы.

Для задач, которые назначены роли с подразделением, отличным от подразделения контракта по проекту, и рабочая группа не была создана, обновление создаст универсального участника рабочей группы для роли, но будет использовать подразделение по контракту проекта для подразделения участника рабочей группы. Возвращаясь к примеру с Project Z, это означает, что подразделению по контракту Contoso US и задачам тестирования плана проекта в рамках этапа реализации назначена роли Технический консультант с подразделением, назначенным Contoso India. Задача тестирования интеграции которая завершается после того, как этап реализации был назначен роли Технический консультант. Подразделением является Contoso US и рабочая группа не была создана. При обновлении будет создан один участник рабочей группы, Технический консультант, которому назначены часы всех трех задач, и подразделение Contoso US, являющееся подразделением проекта по контракту.   
 
Изменение значений по умолчанию для различных подразделений по предоставлению ресурсов на не созданных участниках группы является причиной, по которой рекомендуется создавать или повторно создавать рабочую группу для каждого проекта, содержащего универсальные ресурсы, до обновления, чтобы назначения подразделений не терялись.



[!INCLUDE[footer-include](../includes/footer-banner.md)]