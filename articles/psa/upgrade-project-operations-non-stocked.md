---
title: Обновление с Project Service Automation до Project Operations
description: В этой статье приведен обзор процесса обновления с Microsoft Dynamics 365 Project Service Automation до Dynamics 365 Project Operations.
author: ruhercul
ms.custom: dyn365-projectservice
ms.date: 01/13/2022
ms.topic: article
ms.author: ruhercul
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.reviewer: johnmichalak
ms.openlocfilehash: c7958c1474820361269f19ea8c9279b96f087d7a
ms.sourcegitcommit: 8edd24201cded2672cec16cd5dc84c6a3516b6c2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2022
ms.locfileid: "9230285"
---
# <a name="upgrade-from-project-service-automation-to-project-operations"></a>Обновление с Project Service Automation до Project Operations

Мы рады объявить о первом из трех этапов обновления с Microsoft Dynamics 365 Project Service Automation на Dynamics 365 Project Operations. Эта статья представляет собой обзор для клиентов, которые отправляются в это увлекательное путешествие. В следующих статьях будут представлены рекомендации разработчикам и подробности об улучшении функций. Они не только предоставят рекомендации, которые помогут вам подготовиться к обновлению до Project Operations, но также объяснят, чего вы можете ожидать после обновления.

Программа доставки обновления будет разделена на три этапа.

| Доставка обновлений | Этап 1 (январь 2022 г.) | Фаза 2 (апрельская волна 2022 г.) | Фаза 3  |
|------------------|------------------------|---------------------------|---------------------------|
| Отсутствие зависимости от структурной декомпозиции работ (WBS) для проектов | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |
| WBS в рамках поддерживаемых в настоящее время лимитов Project Operations | | :heavy_check_mark: | :heavy_check_mark: |
| WBS за пределами поддерживаемых в настоящее время лимитов Project Operations, включая поддержку Project Desktop Client | | | :heavy_check_mark: |

## <a name="upgrade-process-features"></a>Функции процесса обновления 

В рамках процесса обновления мы добавили журналы обновлений на карту сайта, чтобы администраторы могли более легко диагностировать сбои. В дополнение к новому интерфейсу, будут добавлены новые правила проверки для обеспечения целостности данных после обновления. Следующие проверки будут добавлены в процесс обновления.

| Проверки | Этап 1 (январь 2022 г.) | Фаза 2 (апрельская волна 2022 г.) | Фаза 3  |
|-------------|------------------------|---------------------------|---------------------------|
| WBS будет проверяться на предмет общих нарушений целостности данных (например, назначения ресурсов, которые связаны с одной и той же родительской задачей, но имеют разные родительские проекты). | | :heavy_check_mark: | :heavy_check_mark: |
| WBS будет проверяться на соответствие [известным ограничениям Project for the Web](/project-for-the-web/project-for-the-web-limits-and-boundaries). | | :heavy_check_mark: | :heavy_check_mark: |
| WBS будет проверяться на соответствие известным ограничениям Project Desktop Client. | |  | :heavy_check_mark: |
| Ресурсы, доступные для резервирования, и календари проектов будут оцениваться на предмет общих несовместимых исключений правил календаря. | | :heavy_check_mark: | :heavy_check_mark: |

На этапе 2 клиенты, обновившиеся до Project Operations, получат возможность обновления существующих проектов до уровня «только чтение» для планирования проектов. В этом режиме только для чтения полная WBS будет видна в сетке отслеживания. Для редактирования WBS руководители проектов могут выбрать **Преобразовать** на главной странице **Проекты**. Затем фоновый процесс обновит проект, чтобы он поддерживал новый интерфейс планирования проектов из Project for the Web. Этот этап подходит для клиентов, у которых есть проекты, которые вписываются в [известные ограничения Project for the Web](/project-for-the-web/project-for-the-web-limits-and-boundaries).

На этапе 3 будет добавлена поддержка Project Desktop Client для клиентов, которые хотят и дальше редактировать свои проекты из этого приложения. Однако, если существующие проекты преобразованы в новый интерфейс Project for the Web, доступ к надстройке будет отключен для каждого преобразованного проекта.

## <a name="prerequisites"></a>Предварительные условия

Чтобы иметь право на обновление этапа 1, клиент должен соответствовать следующим критериям:

- Целевая среда не должна содержать никаких записей в сущности **msdyn_projecttask**.
- Действующие лицензии Project Operations должны быть назначены всем активным пользователям клиента. 
- Клиент должен проверить процесс обновления по крайней мере в одной непроизводственной среде, в которой есть репрезентативный набор данных, согласованный с производственными данными.
- Целевая среда должна быть обновлена до выпуска обновления 41 Project Service Automation (3.10.62.162) или выше.

Предварительные условия для этапа 2 и этапа 3 будут обновляться по мере приближения сроков общей доступности.

## <a name="licensing"></a>Лицензирование

Если у вас есть активные лицензии на Project Service Automation, вы можете установить и использовать Project Operations, который включает в себя все возможности Project Service Automation и многое другое. Таким образом, вы можете протестировать возможности Project Operations, продолжая использовать Project Service Automation в производственной среде. По истечении срока действия ваших лицензий Project Service Automation вам необходимо будет перейти в Project Operations. При планировании этого перехода необходимо учитывать тот факт, что лицензия Project Operations не включает лицензию Project Service Automation.

## <a name="testing-and-refactoring-customizations"></a>Настройки тестирования и рефакторинга

В качестве отправной точки импортируйте все настройки в чистую среду Project Operations (Lite), чтобы убедиться, что импорт прошел успешно и что бизнес-операции работают должным образом.

Вот некоторые вещи, на которые следует обратить внимание:

- Импорт может завершиться неудачно из-за отсутствующих зависимостей. Другими словами, настройки ссылаются на поля или другие компоненты, которые были удалены в Project Operations. В этом случае удалите эти зависимости из среды разработки.
- Если ваши неуправляемые и управляемые решения включают компоненты, которые не настроены, удалите эти компоненты из решения. Например, когда вы настраиваете сущность **Проект**, добавьте в решение только заголовок сущности. Не добавляйте все поля. Если вы ранее добавили все подкомпоненты, возможно, вам придется вручную создать новое решение и добавить в него соответствующие компоненты.
- Формы и представления могут выглядеть не так, как ожидалось. В некоторых случаях, если вы настроили какие-либо готовые формы или представления, эти настройки могут помешать вступлению в силу новых обновлений в Project Operations. Чтобы выявить эти проблемы, мы рекомендуем вам провести параллельную проверку чистой установки Project Operations и установки Project Operations, которая включает ваши настройки. Сравните наиболее часто используемые формы в вашей компании, чтобы убедиться, что ваша версия формы по-прежнему имеет смысл и что в ней есть все из чистой версии формы. Сделайте такую же проверку бок о бок для любых представлений, которые вы настроили.
- Бизнес-логика может дать сбой во время выполнения. Поскольку ссылки на поля в ваших надстройках не проверяются во время импорта, бизнес-логика может завершиться ошибкой из-за ссылок на поля, которые больше не существуют, и вы можете получить сообщение об ошибке, подобное следующему примеру: «Сущность 'Проект' не содержит атрибут с Name = 'msdyn_plannedhours' и NameMapping = 'Logical'». В этом случае измените свои настройки, чтобы они использовали новые поля. Если вы используете автоматически сгенерированные прокси-классы и ссылки со строгими типами в логике надстройки, рассмотрите возможность регенерации этих прокси из чистой установки. Таким образом, вы можете легко определить все места, где ваши надстройки зависят от устаревших полей.

После обновления настроек для чистого импорта Project Operations переходите к следующим шагам.

## <a name="end-to-end-testing-in-development-environments"></a>Сквозное тестирование в средах разработки

### <a name="initiate-upgrade"></a>Инициирование обновления 

1. В центре администрирования Power Platform найдите и выберите свою среду. Затем в приложении найдите и выберите **Dynamics 365 Project Operations**.
2. Выберите **Установить**, чтобы начать обновление. Центр администрирования Power Platform представит эту установку как новую установку. Однако наличие более ранней версии Project Service Automation будет обнаружено, и существующая установка будет обновлена.

    После завершения обновления среда должна показать, что Project Operations установлено, а Project Service Automation не установлено.

    > [!NOTE]
    > В зависимости от объема данных в среде обновление может занять несколько часов. Основная рабочая группа, которая управляет обновлением, должна соответствующим образом спланировать и запустить обновление в нерабочее время. В некоторых случаях, если объем данных велик, обновление следует запустить в выходные дни. Решение о планировании должно основываться на результатах тестирования в средах более низкого уровня.

3. При необходимости обновите настраиваемые решения. На этом этапе разверните все изменения, которые вы внесли в свои настройки в разделе [Настройки тестирования и рефакторинга](#testing-and-refactoring-customizations) этой статьи.
4. Перейдите в пункт **Параметры** \> **Решения** и выберите удаление решения **Устаревшие компоненты Project Operations**.

    Это временное решение, которое содержит существующую модель данных и компоненты, присутствующие во время обновления. Удаляя это решение, вы удаляете все поля и компоненты, которые больше не используются. Таким образом, вы поможете упростить интерфейс и упростите интеграцию и расширение.
    
### <a name="validate-common-scenarios"></a>Проверка работы распространенных сценариев

При проверке ваших конкретных настроек мы рекомендуем вам также просмотреть бизнес-процессы, которые поддерживаются в приложениях. Эти бизнес-процессы включают, помимо прочего, создание сущностей продаж, таких как предложения и контракты, а также создание проектов, включающих WBS и утверждение фактических значений.

## <a name="major-changes-between-project-service-automation-and-project-operations"></a>Основные изменения между Project Service Automation и Project Operations

В этом разделе представлена сводка основных изменений, которые можно ожидать между Project Service Automation и Project Operations.

### <a name="project-planning"></a>Планирование проектов

Возможности планирования проектов в Project Operations больше не полагаются на комбинацию логики на стороне клиента и логики на стороне сервера. Вместо этого Project Operations использует Project for the Web в качестве механизма планирования. Это изменение в возможностях планирования включает несколько новых функций, таких как представления таблицы и диаграммы Ганта, планирование на основе ресурсов, [элементы контрольного списка задач](https://support.microsoft.com/office/use-task-checklists-in-microsoft-project-for-the-web-c69bcf73-5c75-4ad3-9893-6d6f92360e9c) и режимы планирования проекта. Новые возможности планирования также поддерживаются богатым набором новых [интерфейсов прикладного программирования (API)](../project-management/schedule-api-preview.md). Эти API-интерфейсы предназначены для того, чтобы гарантировать, что никакая программная операция по созданию, обновлению или удалению сущности в WBS не повредит вычисляемые поля в расписании.

## <a name="billing-and-pricing"></a>Выставление счетов и ценообразование

В рамках продолжающихся инвестиций в Project Operations в разделе выставления счетов и ценообразования доступно несколько новых возможностей. Ниже приведено несколько примеров:

- [Запись использования материалов по проектам и задачам проекта](../material/material-usage-log.md)
- [Управление субподрядом](../pro/subcontracting/managing-subcontracts-overview.md)
- [Авансы и контракты с предоплатой](../pro/sales/set-up-advances-retainer-based-contracts-sales.md)
- [Состояние и проверка соблюдения лимитов контракта](../pro/proforma-invoicing/manage-nte-status-validations-sales.md)
- Выставление счетов по задачам

## <a name="frequently-asked-questions"></a>Вопросы и ответы

### <a name="which-deployment-types-are-currently-supported-for-upgrade"></a>Какие типы развертывания в настоящее время поддерживаются для обновления?

| Оригинал                                                 | Target                                                    | Status                  |
|--------------------------------------------------------|-----------------------------------------------------------|-------------------------|
| Project Service Automation                             | Развертывание Project Operations Lite                        | Поддерживается               |
| Управление и учет по проектам в Dynamics 365 Finance | Развертывание Project Operations Lite                        | В настоящий момент не поддерживается |
| Управление и учет для проектов в Finance              | Project Operations для сценариев на основе ресурсов / без запасов     | В настоящий момент не поддерживается |
| Project Service Automation 3.x                         | Project Operations для сценариев на основе ресурсов / без запасов     | В настоящий момент не поддерживается |
| Project for the Web (выделенная среда)            | Развертывание Project Operations Lite                        | В настоящий момент не поддерживается |

### <a name="how-can-i-install-project-operations-before-the-upgrade-tooling-is-available"></a>Как я могу установить Project Operations до того, как инструменты обновления станут доступны?

Есть два варианта установки Project Operations до того, как инструменты обновления станут доступны:

- Подготовьте новую среду.
- Разверните Project Operations отдельно в любой торговой организации, где нет Project Service Automation.

> [!NOTE]
> Если Project Service Automation установлен в организации, но не использовался, его можно удалить. После полного удаления Project Service Automation можно будет установить Project Operations в той же организации.
