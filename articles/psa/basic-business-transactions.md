---
title: Бизнес-транзакции
description: В этом разделе представлена информация о бизнес-транзакциях.
author: rumant
ms.custom:
- dyn365-projectservice
ms.date: 03/01/2019
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: 33c27acc6747c94d76892f41031adc46150da0e0
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2021
ms.locfileid: "6011567"
---
# <a name="business-transactions"></a>Бизнес-транзакции

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

В Dynamics 365 Project Service Automation *бизнес-транзакция* — это абстрактная концепция, которая не представлена никакой сущностью. Однако некоторые общие поля и процессы в сущностях предназначены для использования концепции бизнес-транзакций. Следующие сущности используют эту абстракции:

- Сведения строки предложения с расценками
- Сведения строки контракта
- Строки оценки
- Сроки журнала
- Фактические

Из этих сущностей сведениях строки предложения с расценками, сведениях строки контракта и строки оценки сопоставлены этапу оценки в жизненном цикле проекта. Сущности строк журнала и фактических данных сопоставлены этапу выполнения в жизненном цикле проекта.

PSA рассматривает записи в этих пяти сущностях как бизнес-транзакции. Единственное отличие заключается в том, что записи в сущностях, которые сопоставляются этапу оценки, считаются финансовыми прогнозами, а записи в сущностях, которые сопоставляются этапу выполнения, считаются фактическими финансовыми данными, которые уже были выполнены.

Чтобы получить дополнительные сведения, см. разделы [Оценки](estimates.md) и [Фактические данные](actuals.md).

## <a name="concepts-that-are-unique-to-business-transactions"></a>Основные понятия, уникальные для деловых операций
Следующие основные понятия уникальны для концепции деловых операций:

- Тип проводки
- Класс проводки
- Происхождение проводки
- Подключение проводки

### <a name="transaction-type"></a>Тип проводки

Тип транзакции представляет время и контекст финансового влияния на проект. Это представляется набором параметров, который имеет следующие поддерживаемые значения в PSA:
- Стоимость
- Контракт проекта
- Продажи без выставления счета
- Продажи с выставлением счета
- Внутрихолдинговые продажи
- Стоимость единицы распределения ресурсов

### <a name="transaction-class"></a>Класс проводки

Класс транзакции представляет различные типы затрат, понесенных по проектам. Это представляется набором параметров, который имеет следующие поддерживаемые значения в PSA:

- Time
- Расходы
- Материал
- Сбор
- Веха
- Налог

Значение **Веха** обычно используется бизнес-логикой для выставления счетов с фиксированной ценой в PSA.

### <a name="transaction-origin"></a>Происхождение проводки

Источник проводки — это сущность, в которой хранится источник каждой бизнес-проводки. Когда начнется выполнение проекта, каждая бизнес-проводка приведет к другой бизнес-проводке, которая, в свою очередь, создаст другую и так далее. Сущность источника проводки была разработана для хранения данных о происхождении каждой проводки для облегчения отчетности и отслеживания. 

### <a name="transaction-connection"></a>Подключение проводки

Подключение проводки — это сущность, в которой хранится отношение между двумя аналогичными деловыми операциями, такими как стоимость и связанные фактические данные продажи или реверсирования транзакции, запускаемые действиями по выставлению счетов, такими как подтверждение счета или исправления счетов.

Вместе сущности происхождения проводки и подключения проводки помогают отслеживать отношения между деловыми операциями и действиями, которые приводят к созданию определенной деловой операции.

### <a name="example-how-transaction-origin-works-with-transaction-connection"></a>Пример. Как происхождение проводки работает с подключением проводки

Следующий пример показывает типичную обработку записей времени в течение жизненного цикла проекта PSA.

> ![Обработка записей времени в в течение жизненного цикла Project Service](media/basic-guide-17.png)
 
1. Отправка записи времени вызывает создание двух строк журнала: одной для стоимости, второй для продаж без выставления счета.
2. Последующее утверждение записи времени вызывает создание двух строк фактических данных: одной для стоимости, второй для продаж без выставления счета.
3. Когда пользователь создает счет по проекту, проводка строки счета создается на основе данных из фактических данных продаж без выставления счета. 
4. При утверждении счета создаются два новых фактических значения: реверсирование продаж без выставления счетов и фактические данные продаж, за которые выставлен счет.

Каждое из этих событий вызывает создание записей в сущностях происхождения проводки и подключения проводки, чтобы помочь построить трассировку отношений между этими записями, созданными по записи времени, строке журнала, фактическим данным и сведениям строки счета.

Следующая таблица содержит записи в сущности происхождения проводки для предыдущего рабочего процесса.

| Событие                        | Источник                   | Тип источника                       | Транзакция                       | Тип проводки         |
|------------------------------|--------------------------|-----------------------------------|-----------------------------------|--------------------------|
| Отправка записи времени        | GUID записи ввода времени   | Запись времени                        | GUID записи строки журнала (стоимость)   | Строка журнала             |
| GUID записи ввода времени       | Запись времени               | GUID записи строки журнала (продажи)  | Строка журнала                      |                          |
| Утверждение времени                | GUID записи строки журнала | Строка журнала                      | GUID записи продаж без выставления счета        | Фактические                   |
| GUID записи ввода времени       | Запись времени               | GUID записи продаж без выставления счета        | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID записи фактической стоимости           | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID записи фактической стоимости           | Фактические                            |                          |
| Создание счета             | GUID записи ввода времени   | Запись времени                        | GUID проводки по строке счета     | Проводка по строке счета |
| GUID записи строки журнала     | Строка журнала             | GUID проводки по строке счета     | Проводка по строке счета          |                          |
| Подтверждение счета         | GUID строки счета        | Строка счета                      | GUID записи продаж с выставленным счетом          | Фактические                   |
| GUID счета                 | Счет                  | GUID записи продаж с выставленным счетом          | Фактические                            |                          |
| GUID сведений строки счета     | Сведения строки счета      | GUID записи продаж с выставленным счетом          | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID записи продаж с выставленным счетом          | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID записи продаж с выставленным счетом          | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID обращения продаж без выставления счета      | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID обращения продаж без выставления счета      | Фактические                            |                          |
| Исправление черновика счета     | GUID старого ILD             | Проводка по строке счета          | GUID исправления ILD               | Проводка по строке счета |
| GUID старого IL                  | Строка счета             | GUID исправления ILD               | Проводка по строке счета          |                          |
| GUID старого счета             | Счет                  | GUID исправления ILD               | Проводка по строке счета          |                          |
| GUID записи ввода времени       | Запись времени               | GUID исправления ILD               | Проводка по строке счета          |                          |
| GUID записи строки журнала     | Строка журнала             | GUID исправления ILD               | Проводка по строке счета          |                          |
| Исправление утвержденного счета | GUID старого ILD             | Проводка по строке счета          | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                   |
| GUID старого IL                  | Строка счета             | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                            |                          |
| GUID старого счета             | Счет                  | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                            |                          |
| GUID старого ILD                 | Проводка по строке счета | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID старого IL                  | Строка счета             | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID старого счета             | Счет                  | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID исправления ILD          | Проводка по строке счета | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID исправления IL           | Строка счета             | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID корректирующего счета      | Счет                  | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |

Следующая таблица содержит записи в сущности подключения проводки для предыдущего рабочего процесса.

| Событие                          | Проводка 1                 | Роль проводки 1 | Тип проводки 1           | Проводка 2                | Роль проводки 2 | Тип проводки 2 |
|--------------------------------|-------------------------------|--------------------|------------------------------|------------------------------|--------------------|--------------------|
| Отправка записи времени          | GUID строки журнала (Продажи)     | Продажи без выставления счета     | msdyn_journalline            | GUID строки журнала (стоимость)     | Стоимость               | msdyn_journalline  |
| Утверждение времени                  | GUID фактических данных без выставления счета (Продажи)  | Продажи без выставления счета     | msdyn_actual                 | GUID фактической стоимости (стоимость)       | Стоимость               | msdyn_actual       |
| Создание счета               | GUID сведений строки счета      | Продажи с выставлением счета       | msdyn_invoicelinetransaction | GUID фактических данных продажи без выставления счета   | Продажи без выставления счета     | msdyn_actual       |
| Подтверждение счета           | GUID обращения фактических данных         | Обращение          | msdyn_actual                 | GUID исходных продаж без выставления счета | Исходная           | msdyn_actual       |
| GUID продаж с выставлением счета              | Продажи с выставлением счета                  | msdyn_actual       | GUID фактических данных продажи без выставления счета   | Продажи без выставления счета               | msdyn_actual       |                    |
| Исправление черновика счета       | GUID проводки по строке счета | Замена          | msdyn_invoicelinetransaction | GUID продаж с выставлением счета            | Исходная           | msdyn_actual       |
| Утвердить исправление счета     | GUID обращения продаж с выставлением счета    | Обращение          | msdyn_actual                 | GUID продаж с выставлением счета            | Исходная           | msdyn_actual       |
| GUID новых фактических данных продажи без выставления счета | Замена                     | msdyn_actual       | GUID продаж с выставлением счета            | Исходная                     | msdyn_actual       |                    |


[!INCLUDE[footer-include](../includes/footer-banner.md)]