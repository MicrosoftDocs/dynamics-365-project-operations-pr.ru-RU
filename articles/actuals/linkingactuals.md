---
title: Связь фактических данных с исходными записями
description: В этой теме объясняется, как связать фактические данные с исходными записями, такими как запись времени, запись расходов или журналы использования материалов.
author: rumant
ms.date: 03/25/2021
ms.topic: article
ms.prod: ''
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: b5a70d2c2b3f98028b4e4998ed25ab73a275c66e4b8137eb573b943658a1a41e
ms.sourcegitcommit: 7f8d1e7a16af769adb43d1877c28fdce53975db8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2021
ms.locfileid: "6991772"
---
# <a name="link-actuals-to-original-records"></a>Связь фактических данных с исходными записями

_**Относится к:** Project Operations для сценариев на основе ресурсов/нескладируемых запасов, упрощенное развертывание — от сделки до выставления счетов-фактур_


В Dynamics 365 Project Operations *бизнес-транзакция* — это абстрактная концепция, которая не представлена никакой сущностью. Однако некоторые общие поля и процессы в сущностях предназначены для использования концепции бизнес-транзакций. Следующие сущности используют это понятие:

- Сведения строки предложения с расценками
- Сведения строки контракта
- Строки оценки
- Сроки журнала
- Фактические

Из этих сущностей **Сведения строки предложения с расценками**, **Сведения строки контракта** и **Строки оценки** сопоставлены с фазой оценки в жизненном цикле проекта. **Строки журнала** и **Сущности фактических данных** сопоставлены этапу выполнения в жизненном цикле проекта.

Project Operations рассматривает записи в этих пяти сущностях как бизнес-транзакции. Единственное отличие заключается в том, что записи в сущностях, которые сопоставляются этапу оценки, считаются финансовыми прогнозами, а записи в сущностях, которые сопоставляются этапу выполнения, считаются фактическими финансовыми данными, которые уже были выполнены.

## <a name="concepts-that-are-unique-to-business-transactions"></a>Основные понятия, уникальные для деловых операций
Следующие основные понятия уникальны для концепции деловых операций:

- Тип проводки
- Класс проводки
- Происхождение проводки
- Подключение проводки

### <a name="transaction-type"></a>Тип проводки

Тип транзакции представляет время и контекст финансового влияния на проект. Это представляется набором параметров, который имеет следующие поддерживаемые значения в Project Operations:

  - Себестоимость
  - Контракт проекта
  - Продажи без выставления счета
  - Продажи с выставлением счета
  - Внутрихолдинговые продажи
  - Стоимость единицы распределения ресурсов

### <a name="transaction-class"></a>Класс проводки

Класс транзакции представляет различные типы затрат, понесенных по проектам. Это представляется набором параметров, который имеет следующие поддерживаемые значения в Project Operations:

  - Время
  - Расходы
  - Материал
  - Сбор
  - Веха
  - Налог

**Веха** обычно используется бизнес-логикой для выставления счетов с фиксированной ценой в Project Operations.

### <a name="transaction-origin"></a>Происхождение проводки

**Источник проводки** — это сущность, в которой хранится источник каждой бизнес-транзакции. По мере реализации проекта каждая бизнес-транзакция порождает другую бизнес-транзакцию, которая, в свою очередь, порождает еще одну и так далее. Сущность происхождения транзакции предназначена для хранения данных о происхождении каждой транзакции, чтобы помочь с отчетностью и отслеживанием. 

### <a name="transaction-connection"></a>Подключение проводки

**Подключение транзакции** — это сущность, в которой хранится отношение между двумя аналогичными бизнес-транзакциями, такими как стоимость и связанные фактические данные продажи или сторнирования транзакции, запускаемые действиями по выставлению счетов, такими как подтверждение счета или исправления счетов.

Вместе **Происхождение транзакции** и **Подключение транзакции** помогают отслеживать отношения между бизнес-транзакциями и действиями, которые приводят к созданию определенной бизнес-транзакции.

### <a name="example-how-transaction-origin-works-with-transaction-connection"></a>Пример. Как происхождение проводки работает с подключением проводки

Следующий пример показывает типичную обработку записей времени в течение жизненного цикла проекта Project Operations.

> ![Обработка записей времени в течение жизненного цикла Project Service.](media/basic-guide-17.png)
 
1. Отправка записи времени вызывает создание двух строк журнала: одна строка для стоимости, вторая строка для продаж без выставления счета.
2. Последующее утверждение записи времени создает два набора фактических данных: один для стоимости, второй для продаж без выставления счета.
3. Когда создается новый счет по проекту, транзакция строки счета создается на основе данных из фактических данных продаж без выставления счета. 
4. При утверждении счета создаются два новых фактических значения: фактические данные реверсирования продаж без выставления счетов и фактические данные продаж, за которые выставлен счет.

Каждое из этих событий создает запись в сущностях **Происхождение транзакции** и **Подключение транзакции**. Эти новые записи помогают построить историю отношений между записями, созданными по записи времени, строке журнала, фактическим данным и сведениям строки счета.

Следующая таблица содержит записи в сущности **Происхождение транзакции** для рабочего процесса.

| Мероприятие                        | Источник                   | Тип источника                       | Проводка                       | Тип транзакции         |
|------------------------------|--------------------------|-----------------------------------|-----------------------------------|--------------------------|
| Отправка записи времени        | GUID записи ввода времени   | Запись времени                        | GUID записи строки журнала (стоимость)   | Строка журнала             |
| GUID записи ввода времени       | Запись времени               | GUID записи строки журнала (продажи)  | Строка журнала                      |                          |
| Утверждение времени                | GUID записи строки журнала | Строка журнала                      | GUID записи продаж без выставления счета        | Фактические                   |
| GUID записи ввода времени       | Запись времени               | GUID записи продаж без выставления счета        | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID записи фактической стоимости           | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID записи фактической стоимости           | Факт                            |                          |
| Создание счета             | GUID записи ввода времени   | Запись времени                        | GUID проводки по строке счета     | Проводка по строке счета |
| GUID записи строки журнала     | Строка журнала             | GUID проводки по строке счета     | Проводка по строке счета          |                          |
| Подтверждение счета         | GUID строки счета        | Строка счета                      | GUID записи продаж с выставленным счетом          | Фактические                   |
| GUID счета                 | Счет                  | GUID записи продаж с выставленным счетом          | Фактические                            |                          |
| GUID сведений строки счета     | Сведения строки счета      | GUID записи продаж с выставленным счетом          | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID записи продаж с выставленным счетом          | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID записи продаж с выставленным счетом          | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID обращения продаж без выставления счета      | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID обращения продаж без выставления счета      | Фактические                            |                          |
| Исправление черновика счета     | GUID старого ILD             | Проводка по строке счета          | GUID исправления ILD               | Проводка по строке счета |
| GUID старого IL                  | Строка счета             | GUID исправления ILD               | Проводка по строке счета          |                          |
| GUID старого счета             | Счет                  | GUID исправления ILD               | Проводка по строке счета          |                          |
| GUID записи ввода времени       | Запись времени               | GUID исправления ILD               | Проводка по строке счета          |                          |
| GUID записи строки журнала     | Строка журнала             | GUID исправления ILD               | Проводка по строке счета          |                          |
| Исправление утвержденного счета | GUID старого ILD             | Проводка по строке счета          | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                   |
| GUID старого IL                  | Строка счета             | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                            |                          |
| GUID старого счета             | Счет                  | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID обращенных фактических данных продажи с выставленным счетом | Фактические                            |                          |
| GUID старого ILD                 | Проводка по строке счета | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID старого IL                  | Строка счета             | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID старого счета             | Счет                  | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID записи ввода времени       | Запись времени               | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID записи строки журнала     | Строка журнала             | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID исправления ILD          | Проводка по строке счета | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID исправления IL           | Строка счета             | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |
| GUID корректирующего счета      | Счет                  | GUID новых фактических данных продажи без выставления счета    | Фактические                            |                          |

Следующая таблица содержит записи в сущности **Подключение транзакции** для рабочего процесса.

| Мероприятие                          | Проводка 1                 | Роль проводки 1 | Тип проводки 1           | Проводка 2                | Роль проводки 2 | Тип проводки 2 |
|--------------------------------|-------------------------------|--------------------|------------------------------|------------------------------|--------------------|--------------------|
| Отправка записи времени          | GUID строки журнала (Продажи)     | Продажи без выставления счета     | msdyn_journalline            | GUID строки журнала (стоимость)     | Стоимость               | msdyn_journalline  |
| Утверждение времени                  | GUID фактических данных без выставления счета (Продажи)  | Продажи без выставления счета     | msdyn_actual                 | GUID фактической стоимости (стоимость)       | Стоимость               | msdyn_actual       |
| Создание счета               | GUID сведений строки счета      | Продажи с выставлением счета       | msdyn_invoicelinetransaction | GUID фактических данных продажи без выставления счета   | Продажи без выставления счета     | msdyn_actual       |
| Подтверждение счета           | GUID обращения фактических данных         | Обращение          | msdyn_actual                 | GUID исходных продаж без выставления счета | Исходная           | msdyn_actual       |
| GUID продаж с выставлением счета              | Продажи с выставлением счета                  | msdyn_actual       | GUID фактических данных продажи без выставления счета   | Продажи без выставления счета               | msdyn_actual       |                    |
| Исправление черновика счета       | GUID проводки по строке счета | Замена          | msdyn_invoicelinetransaction | GUID продаж с выставлением счета            | Исходная           | msdyn_actual       |
| Утвердить исправление счета     | GUID обращения продаж с выставлением счета    | Обращение          | msdyn_actual                 | GUID продаж с выставлением счета            | Исходная           | msdyn_actual       |
| GUID новых фактических данных продажи без выставления счета | Замена                     | msdyn_actual       | GUID продаж с выставлением счета            | Исходная                     | msdyn_actual       |                    |


[!INCLUDE[footer-include](../includes/footer-banner.md)]
