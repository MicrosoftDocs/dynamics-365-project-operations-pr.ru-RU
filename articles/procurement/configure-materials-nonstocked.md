---
title: Настроить нескладируемые материалы и незавершенные накладные поставщика
description: В этой статье объясняется, как включить нескладируемые материалы и незавершенные счета поставщиков.
author: sigitac
ms.date: 06/22/2021
ms.topic: article
ms.prod: ''
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: 6473ef3510f0d3641a2d61b6a1b1f28980993277
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8913774"
---
# <a name="configure-non-stocked-materials-and-pending-vendor-invoices"></a>Настроить нескладируемые материалы и незавершенные накладные поставщика

_**Относится к:** Project Operations для сценариев на основе ресурсов/без запасов_

## <a name="minimum-version-requirement"></a>Наиболее ранняя требуемая версия

Использование нескладируемых материалов и незавершенных накладных поставщика для сценариев на основе без запасов/ресурсов Dynamics 365 Project Operations требует следующих версий:

Решения Dynamics 365 Dataverse:

- Project Operations — 4.9.0.221 или более поздняя версия
- Решение для оркестрации приложений двойной записи — 2.2.2.23 или более поздняя версия

Dynamics 365 Finance:
- 10.0.18 (10.0.793.52) или более поздняя версия. Убедитесь, что ваша финансовая среда актуальна и все обновления качества применяются в соответствии с минимальными требованиями к версии.

## <a name="run-dual-write-maps-for-non-stocked-materials-and-vendor-invoice-integration"></a>Запуск сопоставлений двойной записи для нескладируемых материалов и интеграция накладных поставщика

В этом разделе представлена информация о конкретных сопоставлениях, необходимых для нескладируемых материалов и накладных поставщика. Убедитесь, что предварительно необходимые сопоставления, перечисленные в статье [Подготовка новой среды](../environment/resource-provision-new-environment.md#run-project-operations-dual-write-maps), работают в вашей среде.

1. Перейдите в Lifecycle Services (LCS), перейдите к вашему проекту LCS и перейдите к страница **Сведения о среде**.
2. В разделе **Сведения о среде Common Data Service** выберите **Ссылка на CDS для приложений**. После выбора ссылки вы будете перенаправлены к списку сущностей в сопоставлениях.
3. Убедитесь, что следующие сопоставления запущены. Если они не запущены, запустите их и обязательно включите все связанные сопоставления таблиц.

    - CDS выпустила отдельные продукты (продукты)
    - Поставщики v2 (msdyn_vendors)
    - Таблица Project Operations для оценок материалов (msdyn_estimatelines)
    - Сущность экспорта накладной поставщика проекта интеграции Project Operations (msdyn_projectvendorinvoices)
    - Сущность экспорта строки накладной поставщика проекта интеграции Project Operations (msdyn_projectvendorinvoicelines)
    - Фактические данные интеграции Project Operations (msdyn_actuals). Убедитесь, что у вас запущено сопоставление версии 1.0.0.14 или выше. Вы можете увидеть активную версию сопоставления в столбце **Версия** на странице **Двойная запись**. Вы можете активировать новую версию сопоставления, выбрав **Версия сопоставления таблиц**, а затем сохраните выбранную версию.

Если вы используете стандартные демонстрационные данные, вам также может потребоваться остановить и перезапустить следующие сопоставления сущности с начальной синхронизацией:
  - Дни оплаты CDS V2 (msdyn_paymentdays)
  - График платежей (msdyn_paymentschedules)
  - Условия оплаты (msdyn_paymentterms)
  - Группы поставщиков (msdyn_vendorgroups)
  - Единицы (uom)

> [!NOTE]
> Начальная синхронизация для групп поставщиков и единиц может завершиться ошибкой для нескольких записей в существующем наборе демонстрационных данных. Вы можете игнорировать ошибки, поскольку они не помешают вам использовать демонстрационные данные с помощью Project Operations.

## <a name="configure-prerequisites-in-dataverse"></a>Настройка обязательных компонентов в Dataverse

### <a name="activate-workflow-to-create-accounts-based-on-vendor-entity"></a>Активируйте рабочий процесс для создания учетных записей на основе сущности поставщика

Решение Dual Write Orchestration обеспечивает [Главная интеграция поставщиков](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/vendor-mapping). В качестве обязательного условия для этой функции данные поставщика должны быть созданы в сущности **Учетные записи**. Активируйте шаблон рабочего процесса для создания поставщиков в таблице **Учетные записи**, как описано в [Переключение между разработками поставщика](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/vendor-switch).

### <a name="set-products-to-be-created-as-active"></a>Задать создание продуктов активными

Нескладируемые материалы должны быть настроены как **Выпущенные продукты** в Финансах. Решение Dual Write Orchestration обеспечивает готовую [Интеграция выпущенных продуктов в Каталог продукции Dataverse](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/product-mapping). По умолчанию продукты из Финансов синхронизируются с Dataverse в состоянии черновика. Чтобы синхронизировать продукт с активным состоянием, чтобы его можно было напрямую использовать в документах об использовании материалов или ожидающих накладных поставщика, перейдите к **Система** > **Администрирование** > **Системное администрирование** > **Системные параметры**, и на вкладке **Продажи** установить **Создавать продукты в активном состоянии** на **Да**.

## <a name="configure-prerequisites-in-finance"></a>Настройка обязательных компонентов в Финансы

### <a name="enable-the-feature-key-for-pending-vendor-invoices"></a>Включите функциональный ключ для незавершенных накладных поставщика

Выполните следующие шаги, чтобы включить функцию добавления сведений о проекте в строки незавершенной накладной поставщика.

1. В Финансах перейдите к рабочая область **Управление функциями**.
2. В списке функций найдите функцию **Включение незавершенных накладных поставщика в Project Operations для сценариев на основе ресурсов/без запасов** и выберите **Включить**.

### <a name="define-category-groups-and-project-categories-for-items"></a>Определите группы категорий и категории проектов для элементов

Настройте хотя бы одну группу категорий для типа проводки **Элемент** и хотя бы одна категория проекта, использующая эту группу. Дополнительные сведения см. в разделе [Настройка категорий проектов](../project-accounting/configure-project-categories.md#category-groups).

Просмотрите профили затрат и доходов по проекту и настройте параметры разноски главной книги для проводок по номенклатуре. Для получения дополнительной информации см. [Настроить учет тарифицируемых проектов](../project-accounting/configure-accounting-billable-projects.md).

### <a name="set-up-a-write-in-product"></a>Настройка вписанного продукта

В Project Operations вы можете записывать оценки материалов и их использование для продуктов из каталога, которые настроены в выпущенном каталоге продуктов, и для вписанных продуктов. Для использования вписанных продуктов требуется один выпущенный продукт, настроенный для этой цели в Финансы. Выполните следующие шаги, чтобы настроить вписанный продукт. Повторите эти шаги для каждого юридического лица, которое использует Project Operations для сценариев на основе ресурсов/без запасов.

1. В Финансах перейдите к **Управление сведениями о продукте** > **Продукты** > **Выпущенные продукты**, и выберите **Создать**.
2. В поле **Тип продукта** выберите **Элемент** и в поле **Подтип продукта** выберите **Продукт**.
3. Введите номер продукта (WRITEIN) и название продукта (Вписанный продукт).
4. Выберите группу модели элемента. Убедитесь, что выбранная вами группа модели элемента имеет поле **Политика запасов Учитываемый в запасах продукт** установлено на **Ложь**.
5. Выберите значения в полях **Группа элемента**, **Группа аналитик хранилища**, а также **Группа аналитик отслеживания**. Используйте **Измерение хранилища** только для **Сайта**, а в поле **Измерения для отслеживания** выберите **Нет**.
6. Выберите значения в полях **Ед. изм. складского учета**, **Ед. изм. покупки**, а также **Ед. изм. продажи**, а затем сохраните изменения.
7. На вкладке **План** задайте параметры порядка по умолчанию и на вкладке **Запасы** задайте сайт и склад по умолчанию.
8. Перейти к **Управление и учет для проектов** > **Настройка** > **Параметры управления и учета для проектов** и открыть **Project Operations в Dynamics 365 Dataverse**. 
9. На вкладка **Материалы** в поле **Вписанный продукт** выберите созданный вами продукт.
10. В вашей среде Dataverse, на карте сайта откройте **Продукты** и найдите запись вписанного продукта. 
11. Откройте сведения о записи и установите состояние продукта на **Списанный**. Такое состояние продукта предотвращает случайное использование этой записи кем-либо непосредственно в оценках материалов и документах об использовании.

### <a name="set-up-a-procurement-integration-account"></a>Настроить учетную запись интеграции закупок

Учетная запись интеграции закупок используется в качестве клирингового счета при разноске незавершенного накладной поставщика со строками, относящимися к проекту.

Когда система разносит ожидающую накладную поставщика, этот счет используется для суммы стоимости проекта. Сведения о накладной поставщика обрабатываются в Dataverse, и создается соответствующий фактические сведения проекта. Информация из фактических сведений проекта добавляется в журнал интеграции Project Operations. Когда вы разносите журнал интеграции, сумма удаляется из учетной записи интеграции закупок и записывается в стоимость проекта.

1. Чтобы настроить учетную запись интеграции закупок, перейдите к **Управление и учет для проектов** > **Настройка** > **Параметры управления и учета для проектов**, и откройте **Project Operations в Dynamics 365 Dataverse**. 
2. Выберите вкладку **Материалы** и выберите значение в поле **Учетная запись интеграции закупок**.

#### <a name="set-up-project-category-defaults-for-an-item"></a>Настройка параметров категории проекта по умолчанию для элемента

1. В Финансы перейдите к **Управление и учет для проектов** > **Настройка** > **Параметры управления и учета для проектов** и откройте **Project Operations в Dynamics 365 Dataverse**. 
2. На вкладка **Значения по умолчанию для категории проекта** в поле выберите значение **Элемент**. Эта категория проекта используется для проводок по материалам, если категория проекта не была задана в записи фактических данных проекта.
