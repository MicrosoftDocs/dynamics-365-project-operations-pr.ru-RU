---
title: Определение ставок затрат для сметных и фактических значений на основе проекта
description: В этой статье содержится информация о том, как определяются ставки затрат для сметных и фактических значений на основе проекта.
author: rumant
ms.date: 9/12/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: rumant
ms.openlocfilehash: 822a7bd8ae87d4fd4044d8b46347bfe1b4ca13ca
ms.sourcegitcommit: 60a34a00e2237b377c6f777612cebcd6380b05e1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/13/2022
ms.locfileid: "9475295"
---
# <a name="determine-cost-rates-for-project-based-estimates-and-actuals"></a>Определение ставок затрат для сметных и фактических значений на основе проекта

_**Относится к:** Project Operations для сценариев на основе ресурсов/без запасов_

Для определения себестоимости в сметных и фактических значениях в Microsoft Dynamics 365 Project Operations система сначала использует дату и валюту во входящем контексте сметных значений или контексте фактических значений с целью определения прайс-листа продажи. В частности, в контексте фактических значений система использует поле **Дата транзакции** для определения применимого прайс-листа. Значение **Дата транзакции** поступающего сметного или фактического значения сравнивается со значениями **Дата начала (независимо от часового пояса)** и **Дата окончания (независимо от часового пояса)** в прайс-листе. После того как прайс-лист себестоимости определен, приложение определяет ставку затрат.

## <a name="determining-cost-rates-in-estimate-and-actual-contexts-for-time"></a>Определение ставок затрат в контекстах сметных и фактических значений для времени

Под контекстом сметных значений для **времени** понимаются:

- Сведения строк предложений с расценками для **времени**.
- Сведения строк контрактов для **времени**.
- Назначение ресурсов в проекте.

Под контекстом фактических значений для **времени** понимаются:

- Строки журнала записей и корректировок для **времени**.
- Строки журнала, которые создаются при отправке записи времени.

После определения прайс-листа затрат система выполняет следующие шаги, чтобы ввести используемую по умолчанию ставку затрат.

1. Система сопоставляет сочетание полей **Роль**, **Компания распределения ресурсов** и **Единица распределения ресурсов** в контексте сметных или фактических значений для значения **Время** со строками цен для роли в прайс-листе. Это сопоставление предполагает, что вы используете стандартные измерения для трудозатрат. Если вы настроили систему для сопоставления полей отличных от полей или в дополнение к полям **Роль**, **Компания распределения ресурсов** и **Единица распределения ресурсов**, то будет использоваться другая комбинация для извлечения соответствующей строки цены роли.
1. Если система находит строку цены роли, в которой указана ставка затрат для сочетания **Роль**, **Компания распределения ресурсов** и **Единица распределения ресурсов**, эта ставка затрат используется как ставка затрат по умолчанию.
1. Если система не может соответствовать значения **Роль**, **Компания распределения ресурсов** и **Единица распределения ресурсов**, она отбрасывает измерение с наименьшим приоритетом, ищет строки цены роли, которые соответствуют двум другим значениям измерения, и продолжает постепенно отбрасывать измерения, пока не будет найдена совпадающая строка цены роли. Ставка стоимости из этой записи будет использоваться как ставка стоимости по умолчанию. Если система не находит подходящую строку цены роли, цена будет установлена на **0** (ноль) по умолчанию.

> [!NOTE]
> Если вы настраиваете другой приоритет полей **Роль** и **Единица распределения ресурсов** или если у вас есть другие измерения с более высоким приоритетом, описанное выше поведение изменится соответствующим образом. Система извлекает записи цен ролей со значениями, которые совпадают со значением каждого измерения ценообразования в порядке приоритета. Строки со значениями NULL для этих измерений идут последними.

## <a name="determining-cost-rates-on-actual-and-estimate-lines-for-expense"></a>Определение ставок затрат по фактическим и сметным строкам для расходов

Под контекстом сметных значений для **расходов** понимаются:

- Сведения строк предложений с расценками для **расходов**.
- Сведения строк контрактов для **расходов**.
- Оценки расходов по проекту.

Под контекстом фактических значений для **расходов** понимаются:

- Строки журнала записей и корректировок для **расходов**.
- Строки журнала, которые создаются при отправке записи расходов.

После определения прайс-листа затрат система выполняет следующие шаги, чтобы ввести используемую по умолчанию ставку затрат.

1. Система сопоставляет сочетание полей **Категория** и **Единица измерения** в контексте сметных или фактических значений для **Расходов** со строками цен для категории в прайс-листе.
1. Если система находит строку цены для категории, в которой указана ставка затрат для сочетания значений в полях **Категория** и **Единица измерения**, это ставка затрат используется в качестве ставки затрат по умолчанию.
1. Если система не может найти значения, совпадающие со значениями полей **Категория** и **Цена за единицу**, цена по умолчанию устанавливается равной **0** (нулю).
1. В контексте сметных значений, если системе удается найти соответствующую строку цены для категории, однако метод ценоообразования отличается от **Цена за единицу**, в качестве ставки затрат по умолчанию устанавливается **0** (нуль).

## <a name="determining-cost-rates-on-actual-and-estimate-lines-for-material"></a>Определение ставок затрат по фактическим и сметным строкам для материалов

Под контекстом сметных значений для **материалов** понимаются:

- Сведения строк предложений с расценками для **материалов**.
- Сведения строк контрактов для **материалов**.
- Оценки материалов по проекту.

Под контекстом фактических значений для **материалов** понимаются:

- Строки журнала записей и корректировок для **материалов**.
- Строки журнала, которые создаются при отправке журнала использования материалов.

После определения прайс-листа затрат система выполняет следующие шаги, чтобы ввести используемую по умолчанию ставку затрат.

1. Система сопоставляет сочетание полей **Продукт** и **Единица измерения** в контексте сметных или фактических значений для **материалов** со строками позиций прайс-листа в прайс-листе.
1. Если система находит строку позиции прайс-листа, в которой указана ставка затрат для сочетания значений в полях **Продукт** и **Единица измерения**, это ставка затрат используется в качестве ставки затрат по умолчанию.
1. Если система не может найти значения, совпадающие со значениями полей **Продукт** и **Единица**, стоимость единицы по умолчанию устанавливается равной **0** (нулю).
1. В контексте сметных или фактических значений, если системе удается найти соответствующую строку позиции прайс-листа, однако метод ценоообразования отличается от **Сумма в валюте**, в качестве стоимости единицы по умолчанию устанавливается **0** (нуль). Такое поведение связано с тем, что для используемых в проекте материалов Project Operations поддерживает только метод ценообразования **Сумма в валюте**.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
