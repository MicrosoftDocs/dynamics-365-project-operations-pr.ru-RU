---
title: Создание настраиваемых полей в качестве измерений цен
description: В этой статье представлена информация о том, как настраивать измерения цен с помощью пользовательских полей.
author: rumant
ms.date: 09/18/2020
ms.topic: article
ms.prod: ''
audience: Application User
ms.reviewer: johnmichalak
ms.search.scope: ''
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Service industries
ms.author: rumant
ms.dyn365.ops.version: ''
ms.search.validFrom: 2020-10-01
ms.openlocfilehash: 0c0c43e483ebcb016747e533d685f13fd5dd8700
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8917592"
---
# <a name="set-up-custom-fields-as-pricing-dimensions"></a>Создание настраиваемых полей в качестве измерений цен

_**Относится к:** Project Operations для сценариев на основе ресурсов/нескладируемых запасов, упрощенное развертывание — от сделки до выставления счетов-фактур_

Прежде чем начать, в этой статье предполагается, что пользователь завершил процедуры из статей [Создание настраиваемых полей и сущностей](create-custom-fields-entities-pricing-dimensions.md) и [Добавление требуемых настраиваемых полей к настройке цены и транзакционным сущностям](add-custom-fields-price-setup-transactional-entities.md). Если вы еще не завершили эти процедуры, вернитесь и выполните их, а затем вернитесь к этой статье. 

В этой статье представлена информация о настройке настраиваемых измерений цен. На странице **Параметры** на вкладке **Сумма на основе измерений цен** отображаются записи в сущностях измерения цен. По умолчанию на этой вкладке в сетке есть две строки:

- **msdyn_resourcecategory** (Роль)
- **msdyn_OrganizationalUnit** (Подразделение)

> [!IMPORTANT]
> Не удаляйте эти строки. Однако если они вам не нужны, можно сделать их неприменимыми в определенном контексте, задав для всех атрибутов **Применимо к стоимости**, **Применимо к продажам** и **Применимо к покупке** значение **Нет**. Установка для этих атрибутов значения **Нет** имеет такой же эффект, как если это поле не было измерением цены.

Чтобы поле стало измерением ценообразования, для него должны выполняться следующие условия:

- Оно должны быть создано как поле в сущностях **Цена роли** и **Наценки цены роли**. Дополнительные сведения о том, как это сделать, см. в разделе [Добавлении настраиваемых полей в настройку цены и транзакционные сущности](add-custom-fields-price-setup-transactional-entities.md).

- Должно быть создано как строка в таблице **Измерение цен**. Например, добавьте строки измерений цен, как показано на следующем рисунке. 

![Строки измерений цен на основе суммы.](media/Amt-based-PD.png)

Рабочие часы ресурса (**msdyn_resourceworkhours**) добавлены в качестве измерения на основе наценки и были добавлены на вкладку **Измерение цены на основе наценки**.

![Строки измерения цены на основе наценки.](media/Markup-based-PD.png)


> [!IMPORTANT]
> Любое изменение данных измерения цен в этой таблице, существующих или новых, распространяется на бизнес-логику ценообразования только после обновления кэша. Для обновления кэша может потребоваться до 10 минут. Подождите это время, чтобы увидеть изменения в логике задания цены по умолчанию, которая должна получиться в результате изменения данных измерения цен.


## <a name="attributes-of-the-pricing-dimensions-table"></a>Атрибуты таблицы измерений цен
Следующие разделы содержат сведения о различных атрибутах в таблице **Измерения цен**.

### <a name="pricing-dimension-name"></a>Имя измерения цен
Это значение должно быть точно таким же, как и имя схемы поля, которое добавлено в таблицу **Цена роли** для настраиваемых измерений цены. Дополнительные сведения о добавлении полей в таблицу **Цена роли** см. в разделе [Добавление настраиваемых полей к настройке цены и транзакционным сущностям](add-custom-fields-price-setup-transactional-entities.md).

### <a name="type-of-dimension"></a>Тип измерения
Имеется два типа измерений цен:
  
  - **Измерения на основе сумм**: значения измерения из контекста ввода сопоставляются со значениями измерения в строке **Цена роли** и цена/стоимость устанавливается по умолчанию из таблицы **Цена роли**.
  - **Измерения на основе наценки**: существуют измерения, в которых используются следующий трехступенчатый процесс для получения цены/стоимости:
 
    1. Значения измерений, не основанных на наценке, из контекста ввода сопоставляются со строкой цены роли, чтобы получить базовую ставку.
    2. Значения измерений из контекста ввода сопоставляются со строкой **Наценка цены роли**, чтобы получить процент наценки.
    3. Процент наценки из второго шага применяется к базовой ставке, полученной из таблицы **Цена роли** в первом шаге, чтобы получить окончательную цену/стоимость.
   
   В следующей таблице показан расчет наценок на цену.
  
| Роль        | Подразделение    |Расположение работы      |Стандартный заголовок      |Рабочие часы ресурса      |  Наценка|
| ------------|-------------|-------------------|--------------------|-------------------------|--------:|
|             | Contoso India|На месте            |                    |Сверхурочная работа                 |15     |
|             | Contoso India|Локальный             |                    |Сверхурочная работа                 |10     |
|             | Contoso US   |Локальный             |                    |Сверхурочная работа                 |20     |


Если ресурс из компании Contoso India с базовой ставкой 100 долларов США работает на месте, и он зарегистрировал 8 часов обычного времени и 2 часа переработки в записи времени, механизм ценообразования будет использовать базовую ставку 100 за 8 часов, чтобы записать 800 долларов США. За 2 часа переработки будет применена наценка 15% к базовому тарифу 100, чтобы получить цену за единицу 115 долларов США, и запишет общую стоимость 230 долларов США.

### <a name="applicable-to-cost"></a>Применимо к стоимости 
Если задано значение **Да**, это означает, что значение измерения из контекста ввода должно использоваться для сопоставления с таблицами **Цена роли** и **Наценка цены роли** при извлечении стоимости и тарифов наценки.

### <a name="applicable-to-sales"></a>Применимо к продажам
Если задано значение **Да**, это означает, что значение измерения из контекста ввода должно использоваться для сопоставления с полями **Цена роли** и **Наценка цены роли** при извлечении тарифов для выставления счетов и наценки.

### <a name="applicable-to-purchase"></a>Применимо к покупке
Если задано значение **Да**, это означает, что значение измерения из контекста ввода должно использоваться для сопоставления с полями **Цена роли** и **Наценка цены роли** при извлечении цены продажи. Сценарии субподряда не поддерживаются, поэтому это поле не используется. 

### <a name="priority"></a>Приоритет
Настройка приоритета измерения помогает ценообразованию создавать цену даже когда не удается получить точное соответствие между значениями входных измерений и значений из таблиц **Цена роли** и **Наценка цены роли**. В этом сценарии используются значения NULL для значений измерений без соответствий, взвешивая измерения в порядке их приоритета.

- **Приоритет стоимости**: значение приоритета стоимости измерения будет указывать вес этого измерения при сопоставлении с настройкой себестоимости. Значение **Приоритет стоимости** должно быть уникальным среди измерений типа **Применимо к стоимости**.
- **Приоритет продаж**: значение приоритета продаж измерения будет указывать вес этого измерения при сопоставлении с настройкой цен продажи или тарифов для счетов. Значение **Приоритет продаж** должно быть уникальным среди измерений типа **Применимо к продажам**.


[!INCLUDE[footer-include](../includes/footer-banner.md)]