---
title: Синхронизируйте контракты по проекту и проекты напрямую из Project Service Automation с Finance and Operations
description: В этой теме описаны шаблон и базовые задачи, которые используются для синхронизации контрактов по проекту и проектов непосредственно из Microsoft Dynamics 365 Project Service Automation с Dynamics 365 Finance.
author: KimANelson
manager: AnnBe
ms.date: 09/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: 57fe4ae8-6ee9-442d-9933-d525b5415db8
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: b914a56b306639253a8cd3b7caa754da175b6df2
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "3754906"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance-and-operations"></a><span data-ttu-id="9730c-103">Синхронизируйте контракты по проекту и проекты напрямую из Project Service Automation с Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="9730c-103">Synchronize project contracts and projects directly from Project Service Automation to Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="9730c-104">В этой теме описаны шаблон и базовые задачи, которые используются для синхронизации контрактов по проекту и проектов непосредственно из Dynamics 365 Project Service Automation с Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="9730c-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="9730c-105">Если вы используете выпуск Enterprise Edition 7.3.0, вам необходимо установить KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="9730c-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="9730c-106">Поток данных для Project Service Automation в Finance</span><span class="sxs-lookup"><span data-stu-id="9730c-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="9730c-107">Прежде чем вы сможете использовать решение интеграции Project Service Automation с Finance, вы должны быть знакомы с функцией интеграции данных Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="9730c-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="9730c-108">Решение для интеграции Project Service Automation в Finance использует функцию интеграции данных для синхронизации данных между экземплярами Project Service Automation и Finance.</span><span class="sxs-lookup"><span data-stu-id="9730c-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="9730c-109">Шаблон интеграции, доступный с функцией интеграции данных, позволяет передавать данные о контрактах, проектах, строках контрактов по проектам и вехах строк контрактов проекта из Project Service Automation в Finance.</span><span class="sxs-lookup"><span data-stu-id="9730c-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="9730c-110">На следующем рисунке показано, как данные синхронизируются между Project Service Automation и Finance.</span><span class="sxs-lookup"><span data-stu-id="9730c-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="9730c-111">[![Поток данных для интеграции Project Service Automation с Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="9730c-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="9730c-112">Шаблоны и задачи</span><span class="sxs-lookup"><span data-stu-id="9730c-112">Templates and tasks</span></span>

<span data-ttu-id="9730c-113">Чтобы получить доступ к доступным шаблонам, в центре администрирования Microsoft Power Apps выберите **Проекты**, а затем в правом верхнем углу выберите **Создать проект** для выбора общедоступных шаблонов.</span><span class="sxs-lookup"><span data-stu-id="9730c-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="9730c-114">Следующие шаблоны и базовые задачи используются для синхронизации контрактов по проекту и проектов из Project Service Automation в Finance:</span><span class="sxs-lookup"><span data-stu-id="9730c-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="9730c-115">Интеграция с Dynamics 365 Project Service Automation v2.x</span><span class="sxs-lookup"><span data-stu-id="9730c-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="9730c-116">**Название шаблона в интеграции данных:** Проекты и контракты (из PSA в Fin and Ops)</span><span class="sxs-lookup"><span data-stu-id="9730c-116">**Name of the template in Data integration:** Projects and contracts (PSA to Fin and Ops)</span></span>
- <span data-ttu-id="9730c-117">**Название задач в проекте:**</span><span class="sxs-lookup"><span data-stu-id="9730c-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="9730c-118">Контракты на проекты из PSA в Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="9730c-118">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="9730c-119">Проекты из PSA в Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="9730c-119">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="9730c-120">Строки контракта на проекты из PSA в Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="9730c-120">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="9730c-121">Вехи строк контракта на проекты из PSA в Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="9730c-121">Project contract line milestones PSA to Fin and Ops</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="9730c-122">Интеграция с Dynamics 365 Project Service Automation v3.x</span><span class="sxs-lookup"><span data-stu-id="9730c-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="9730c-123">В Project Service Automation произошло изменение схемы, которое влияет на шаблон вехи строк контракта по проекту, и для интеграции Project Service Automation v3.x с Dynamics 365 требуется использование версии шаблона v2.</span><span class="sxs-lookup"><span data-stu-id="9730c-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="9730c-124">**Название шаблона в интеграции данных:** Проекты и контракты (из PSA 3.x в Fin and Ops) — v2</span><span class="sxs-lookup"><span data-stu-id="9730c-124">**Name of the template in Data integration:** Projects and Contracts (PSA 3.x to Fin and Ops) - v2</span></span>
- <span data-ttu-id="9730c-125">**Название задач в проекте:**</span><span class="sxs-lookup"><span data-stu-id="9730c-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="9730c-126">Контракты на проекты из PSA в Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="9730c-126">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="9730c-127">Проекты из PSA в Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="9730c-127">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="9730c-128">Строки контракта на проекты из PSA в Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="9730c-128">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="9730c-129">Вехи строк контракта на проекты из PSA в Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="9730c-129">Project contract line milestones PSA to Fin and Ops</span></span>

<span data-ttu-id="9730c-130">Перед синхронизацией контрактов по проектам и проектов вы должны синхронизировать организации.</span><span class="sxs-lookup"><span data-stu-id="9730c-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="9730c-131">Набор сущностей</span><span class="sxs-lookup"><span data-stu-id="9730c-131">Entity set</span></span>

| <span data-ttu-id="9730c-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="9730c-132">Project Service Automation</span></span>       | <span data-ttu-id="9730c-133">Финансы</span><span class="sxs-lookup"><span data-stu-id="9730c-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="9730c-134">Заказы</span><span class="sxs-lookup"><span data-stu-id="9730c-134">Orders</span></span>                           | <span data-ttu-id="9730c-135">Сущность интеграции для контрактов по проекту</span><span class="sxs-lookup"><span data-stu-id="9730c-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="9730c-136">Проекты</span><span class="sxs-lookup"><span data-stu-id="9730c-136">Projects</span></span>                         | <span data-ttu-id="9730c-137">Сущность интеграции для проекта</span><span class="sxs-lookup"><span data-stu-id="9730c-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="9730c-138">Строки заказа</span><span class="sxs-lookup"><span data-stu-id="9730c-138">Order lines</span></span>                      | <span data-ttu-id="9730c-139">Сущность интеграции для строки контракта по проекту</span><span class="sxs-lookup"><span data-stu-id="9730c-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="9730c-140">Вехи строки контракта по проекту</span><span class="sxs-lookup"><span data-stu-id="9730c-140">Project contract line milestones</span></span> | <span data-ttu-id="9730c-141">Сущность интеграции для вехи строк контракта по проекту</span><span class="sxs-lookup"><span data-stu-id="9730c-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="9730c-142">Поток сущностей</span><span class="sxs-lookup"><span data-stu-id="9730c-142">Entity flow</span></span>

<span data-ttu-id="9730c-143">Контракты по проекту управляются в Project Service Automation и синхронизируются с Finance как контракты по проекту.</span><span class="sxs-lookup"><span data-stu-id="9730c-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="9730c-144">В рамках шаблона интеграции вы можете задать источник интеграции в Finance для контракта по проекту.</span><span class="sxs-lookup"><span data-stu-id="9730c-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="9730c-145">Проекты «Время и материалы» и проекты с фиксированной ценой управляются в Project Service Automation и синхронизируются с Finance как проекты.</span><span class="sxs-lookup"><span data-stu-id="9730c-145">Time and material project and Fixed price projects are managed in Project Service Automation, and they are synchronized to Finance as projects.</span></span> <span data-ttu-id="9730c-146">В рамках интеграции шаблона вы можете задать источник интеграции в Finance для проекта.</span><span class="sxs-lookup"><span data-stu-id="9730c-146">As part of the template integration, you can set the integration source in Finance for the project.</span></span>

<span data-ttu-id="9730c-147">Строки контрактов по проекту управляются в Project Service Automation и синхронизируются с Finance как правила выставления счетов по проекту.</span><span class="sxs-lookup"><span data-stu-id="9730c-147">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="9730c-148">Если метод выставления счетов отличается от типа проекта по умолчанию, синхронизация обновляет тип проекта для проекта строки контракта и группы проектов.</span><span class="sxs-lookup"><span data-stu-id="9730c-148">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="9730c-149">Вехи строк контрактов по проекту управляются в Project Service Automation и синхронизируются с Finance как вехи правил выставления счетов по проекту.</span><span class="sxs-lookup"><span data-stu-id="9730c-149">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="9730c-150">Решение для интеграции Project Service Automation с Finance</span><span class="sxs-lookup"><span data-stu-id="9730c-150">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="9730c-151">Поле **Код контракта по проекту** доступно на странице **Контракты по проектам**.</span><span class="sxs-lookup"><span data-stu-id="9730c-151">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="9730c-152">Это поле стало естественным и уникальным ключом для поддержки интеграции.</span><span class="sxs-lookup"><span data-stu-id="9730c-152">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="9730c-153">При создании нового контракта по проекту, если значение **Код контракта по проекту** еще не существует, оно автоматически создается с использованием числовой последовательности.</span><span class="sxs-lookup"><span data-stu-id="9730c-153">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="9730c-154">Значение состоит из **ORD**, за которым следует возрастающая числовая последовательность, а затем суффикс из шести символов.</span><span class="sxs-lookup"><span data-stu-id="9730c-154">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="9730c-155">Например: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="9730c-155">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="9730c-156">Поле **Номер проекта** доступно на странице **Проекты**.</span><span class="sxs-lookup"><span data-stu-id="9730c-156">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="9730c-157">Это поле стало естественным и уникальным ключом для поддержки интеграции.</span><span class="sxs-lookup"><span data-stu-id="9730c-157">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="9730c-158">При создании нового проекта, если значение **Номер проекта** еще не существует, оно автоматически создается с использованием числовой последовательности.</span><span class="sxs-lookup"><span data-stu-id="9730c-158">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="9730c-159">Значение состоит из **PRJ**, за которым следует возрастающая числовая последовательность, а затем суффикс из шести символов.</span><span class="sxs-lookup"><span data-stu-id="9730c-159">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="9730c-160">Например: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="9730c-160">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="9730c-161">Когда применяется решение интеграции Project Service Automation с Finance, сценарий обновления задает поле **Код контракта по проекту** для существующих контрактов по проекту и поле **Номер проекта** для существующих проектов в Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="9730c-161">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="9730c-162">Предварительные условия и настройка сопоставления</span><span class="sxs-lookup"><span data-stu-id="9730c-162">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="9730c-163">Перед синхронизацией контрактов по проектам и проектов вы должны синхронизировать организации.</span><span class="sxs-lookup"><span data-stu-id="9730c-163">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="9730c-164">В вашем наборе подключения добавьте сопоставление поля ключа интеграции для **msdyn\_organizationalunits** в **msdyn\_name \[Name\]**.</span><span class="sxs-lookup"><span data-stu-id="9730c-164">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="9730c-165">Сначала вам может потребоваться добавить проект в набор подключений.</span><span class="sxs-lookup"><span data-stu-id="9730c-165">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="9730c-166">Для получения дополнительной информации см. [Интеграция данных в Common Data Service для приложений](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="9730c-166">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="9730c-167">В вашем наборе подключения добавьте сопоставление поля ключа интеграции для **msdyn\_projects** в **msdynce\_projectnumber \[Project Number\]**.</span><span class="sxs-lookup"><span data-stu-id="9730c-167">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="9730c-168">Сначала вам может потребоваться добавить проект в набор подключений.</span><span class="sxs-lookup"><span data-stu-id="9730c-168">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="9730c-169">Для получения дополнительной информации см. [Интеграция данных в Common Data Service для приложений](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="9730c-169">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="9730c-170">**SourceDataID** для контрактов по проекту и проектов может быть обновлено на другое значение или удалено из сопоставления.</span><span class="sxs-lookup"><span data-stu-id="9730c-170">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="9730c-171">Значение шаблона по умолчанию — **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="9730c-171">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="9730c-172">Сопоставление **PaymentTerms** необходимо обновить, чтобы оно отражало действительные условия оплаты в Finance.</span><span class="sxs-lookup"><span data-stu-id="9730c-172">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="9730c-173">Вы также можете удалить сопоставление из задачи проекта.</span><span class="sxs-lookup"><span data-stu-id="9730c-173">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="9730c-174">У сопоставления значений по умолчанию — значения по умолчанию для демонстрационных данных.</span><span class="sxs-lookup"><span data-stu-id="9730c-174">The default value map has default values for demo data.</span></span> <span data-ttu-id="9730c-175">В следующей таблице показаны значения в Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="9730c-175">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="9730c-176">Value</span><span class="sxs-lookup"><span data-stu-id="9730c-176">Value</span></span> | <span data-ttu-id="9730c-177">Описание</span><span class="sxs-lookup"><span data-stu-id="9730c-177">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="9730c-178">1</span><span class="sxs-lookup"><span data-stu-id="9730c-178">1</span></span>     | <span data-ttu-id="9730c-179">Оплата через 30 дней</span><span class="sxs-lookup"><span data-stu-id="9730c-179">Net 30</span></span>        |
    | <span data-ttu-id="9730c-180">2</span><span class="sxs-lookup"><span data-stu-id="9730c-180">2</span></span>     | <span data-ttu-id="9730c-181">Оплата через 30 дней, при оплате через 10 дней скидка 2 %</span><span class="sxs-lookup"><span data-stu-id="9730c-181">2% 10, Net 30</span></span> |
    | <span data-ttu-id="9730c-182">3</span><span class="sxs-lookup"><span data-stu-id="9730c-182">3</span></span>     | <span data-ttu-id="9730c-183">Оплата через 45 дней</span><span class="sxs-lookup"><span data-stu-id="9730c-183">Net 45</span></span>        |
    | <span data-ttu-id="9730c-184">4</span><span class="sxs-lookup"><span data-stu-id="9730c-184">4</span></span>     | <span data-ttu-id="9730c-185">Оплата через 60 дней</span><span class="sxs-lookup"><span data-stu-id="9730c-185">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="9730c-186">Power Query</span><span class="sxs-lookup"><span data-stu-id="9730c-186">Power Query</span></span>

<span data-ttu-id="9730c-187">Вы должны использовать Microsoft Power Query для Excel для фильтрации данных, если выполняются следующие условия:</span><span class="sxs-lookup"><span data-stu-id="9730c-187">You must use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="9730c-188">У вас есть заказы на продажу в Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="9730c-188">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="9730c-189">У вас есть несколько подразделений в Project Service Automation, и эти они будут сопоставлены с несколькими юридическими лицами в Finance.</span><span class="sxs-lookup"><span data-stu-id="9730c-189">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="9730c-190">Если вам необходимо использовать Power Query, следуйте этим рекомендациям:</span><span class="sxs-lookup"><span data-stu-id="9730c-190">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="9730c-191">В шаблоне проектов и контрактов (из PSA в Fin and Ops) есть фильтр по умолчанию, который включает только заказы на продажу типа **рабочий элемент (msdyn\_ordertype = 192350001)**.</span><span class="sxs-lookup"><span data-stu-id="9730c-191">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="9730c-192">Этот фильтр помогает гарантировать, что контракты по проекту не создаются для заказов на продажу в Finance.</span><span class="sxs-lookup"><span data-stu-id="9730c-192">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="9730c-193">Если вы создаете свой собственный шаблон, вы должны добавить этот фильтр.</span><span class="sxs-lookup"><span data-stu-id="9730c-193">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="9730c-194">Вы должны создать фильтр Power Query, который включает только организации по контракту, которые должны быть синхронизированы с юридическим лицом из набора подключений интеграции.</span><span class="sxs-lookup"><span data-stu-id="9730c-194">You must create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="9730c-195">Например, контракты по проекту, которые у вас есть с подразделением по контракту Contoso US, должны быть синхронизированы с юридическим лицом USSI, но контракты по проекту, которые у вас есть с подразделением по контракту Contoso Global, должны быть синхронизированы с юридическим лицом USMF.</span><span class="sxs-lookup"><span data-stu-id="9730c-195">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="9730c-196">Если вы не добавите этот фильтр в сопоставление задач, все контракты по проекту будут синхронизированы с юридическим лицом, которое определено для набора подключений, независимо от подразделения по контракту.</span><span class="sxs-lookup"><span data-stu-id="9730c-196">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="9730c-197">Сопоставление шаблонов в интеграции данных</span><span class="sxs-lookup"><span data-stu-id="9730c-197">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="9730c-198">Поля **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, и **AddressZipCode** не включены в сопоставление по умолчанию для контрактов по проекту.</span><span class="sxs-lookup"><span data-stu-id="9730c-198">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="9730c-199">Вы можете добавить сопоставления, если вам нужно синхронизировать эти данные для контрактов по проекту.</span><span class="sxs-lookup"><span data-stu-id="9730c-199">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="9730c-200">Поля **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** и **ProjectType** не включены в сопоставление по умолчанию для проектов.</span><span class="sxs-lookup"><span data-stu-id="9730c-200">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="9730c-201">Вы можете добавить сопоставления, если вам нужно синхронизировать эти данные для проектов.</span><span class="sxs-lookup"><span data-stu-id="9730c-201">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="9730c-202">На следующих рисунках показаны примеры сопоставлений задач шаблона в интеграции данных.</span><span class="sxs-lookup"><span data-stu-id="9730c-202">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="9730c-203">В сопоставлении отображается информация о полях, которые будут синхронизированы из Project Service Automation в Finance.</span><span class="sxs-lookup"><span data-stu-id="9730c-203">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="9730c-204">[![Сопоставление шаблонов](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="9730c-204">[![Template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="9730c-205">[![Сопоставление шаблонов](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="9730c-205">[![Template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="9730c-206">[![Сопоставление шаблонов](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="9730c-206">[![Template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="9730c-207">[![Сопоставление шаблонов](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="9730c-207">[![Template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="9730c-208">Сопоставление вех строк контракта по проекту в Projects and Contracts (PSA 3.x в Dynamics) — шаблон v2:</span><span class="sxs-lookup"><span data-stu-id="9730c-208">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="9730c-209">[![Сопоставление шаблонов](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="9730c-209">[![Template mapping](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
